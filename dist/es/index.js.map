{"version":3,"file":"index.js","sources":["../../src/util/theme.tsx","../../src/types/Election.ts","../../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../../node_modules/style-inject/dist/style-inject.es.js","../../src/components/Typography/Typography.tsx","../../src/components/Button/Button.tsx","../../src/components/ColoredSquare/ColoredSquare.tsx","../../src/util/format.ts","../../src/components/PartyResultCard/PartyResultCard.tsx","../../src/components/PartyResultInline/PartyResultInline.tsx","../../src/components/HorizontalStackedBar/HorizontalStackedBar.tsx","../../src/components/PercentageBars/PercentageBars.tsx","../../src/components/PercentageBarsLegend/PercentageBarsLegend.tsx","../../src/components/BarChart/BarChart.tsx","../../node_modules/react-use-dimensions/es/index.js","../../src/components/HereMap/HereMap.tsx","../../src/components/ElectionMap/ElectionMap.tsx","../../src/components/ResultsTable/ResultsTable.tsx","../../src/components/ElectionTurnoutBars/ElectionTurnoutBars.tsx","../../src/components/ElectionTurnoutBreakdownChart/ElectionTurnoutBreakdownChart.tsx","../../src/components/Warning/ElectionScopeIncompleteWarning.tsx","../../src/components/ElectionTurnoutSection/ElectionTurnoutSection.tsx","../../src/components/ElectionObservationSection/ElectionObservationSection.tsx","../../src/components/ElectionResultsStackedBar/ElectionResultsStackedBar.tsx","../../src/components/ElectionResultsSummaryTable/ElectionResultsSummaryTable.tsx","../../src/components/ElectionResultsSummarySection/ElectionResultsSummarySection.tsx","../../src/components/ElectionResultsSeats/ElectionResultsSeats.tsx","../../src/components/ElectionResultsTableSection/ElectionResultsTableSection.tsx","../../src/components/ElectionResultsProcess/ElectionResultsProcess.tsx","../../src/components/ElectionTimeline/ElectionTimeline.tsx","../../src/components/ElectionScopePicker/ElectionScopePicker.tsx"],"sourcesContent":["import React, { createContext, forwardRef, useContext, useMemo } from \"react\";\n\nexport type ClassNames = { [key: string]: string };\n\nexport function mergeClasses(\n  a: string | null | undefined | false,\n  b: string | null | undefined | false,\n): string | undefined {\n  if (!a) {\n    return b || undefined;\n  }\n  if (!b) {\n    return a || undefined;\n  }\n  return `${a} ${b}`;\n}\n\nexport function overrideClasses(classes: ClassNames, overrides?: ClassNames | void): ClassNames {\n  if (!overrides) {\n    return classes;\n  }\n  const newClasses = Object.assign({}, classes);\n  for (const key in overrides) {\n    const mergedClasses = mergeClasses(newClasses[key], overrides[key]);\n    if (mergedClasses) {\n      newClasses[key] = mergedClasses;\n    }\n  }\n  return newClasses;\n}\n\nexport interface Theme extends ThemeConstants {\n  colors: {\n    primary: string;\n    primary75: string;\n    primary50: string;\n    primary25: string;\n    secondary: string;\n  };\n  componentClasses: {\n    [componentName: string]: ClassNames;\n  };\n  componentValues: {\n    [componentName: string]: ThemeConstants;\n  };\n}\n\nconst defaultTheme: Theme = {\n  colors: {\n    primary: \"#FFCC00\",\n    primary75: \"#FFCC00AF\",\n    primary50: \"#FFCC007F\",\n    primary25: \"#FFCC003F\",\n    secondary: \"#352245\",\n  },\n  componentClasses: {},\n  componentValues: {},\n};\n\nconst ThemeContext = createContext<Theme>(defaultTheme);\n\nexport function useTheme(): Theme {\n  return useContext(ThemeContext);\n}\nexport const ThemeProvider = ThemeContext.Provider;\n\nexport function mergeThemeClasses(\n  theme: Theme,\n  componentName: string,\n  componentClasses?: ClassNames | void,\n  propsClasses?: ClassNames | void,\n  propsClassName?: string | void,\n): ClassNames {\n  let classes = overrideClasses(componentClasses || {}, theme.componentClasses[componentName]);\n  classes = overrideClasses(classes, propsClasses);\n  if (propsClassName) {\n    classes = overrideClasses(classes, { root: propsClassName });\n  }\n  return classes;\n}\n\nconst mergeConstants = (a?: ThemeConstants | void, b?: ThemeConstants | void): ThemeConstants | void => {\n  if (!a) {\n    return b;\n  }\n  if (!b) {\n    return a;\n  }\n  return Object.assign({}, a, b);\n};\n\nconst emptyValues: ThemeConstants = {};\n\nexport function mergeThemeConstants(\n  theme: Theme,\n  componentName: string,\n  componentValues?: ThemeConstants | void,\n  propsValues?: ThemeConstants | void,\n): ThemeConstants {\n  let values = mergeConstants(componentValues, theme.componentValues[componentName]);\n  values = mergeConstants(values, propsValues) || emptyValues;\n  return values;\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type PropsObject = object;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type ThemeConstants = { [key: string]: any };\n\nexport type ThemableComponentProps<P extends PropsObject> = P & {\n  className?: string;\n  classes?: ClassNames;\n  constants?: ThemeConstants;\n};\nexport type ThemableComponent<P extends PropsObject> = React.ComponentType<ThemableComponentProps<P>>;\nexport type ThemedComponentProps<P extends PropsObject> = P & { classes: ClassNames; constants: ThemeConstants };\nexport type ThemedComponent<P extends PropsObject> = React.ComponentType<ThemedComponentProps<P>>;\nexport type ThemableHOC<P extends PropsObject> = (Component: ThemedComponent<P>) => ThemableComponent<P>;\n\n// This function has this arity so that it can also be used as a decorator,\n// whenever those might become mainstream\nexport const themable = <P extends PropsObject>(\n  componentName: string,\n  componentClasses?: ClassNames,\n  componentValues?: ThemeConstants,\n): ThemableHOC<P> => {\n  return (Component: ThemedComponent<P>) => {\n    return (forwardRef(function WrappedComponent(props: ThemableComponentProps<P>, ref) {\n      const theme = useTheme();\n      const classes = useMemo(\n        () => mergeThemeClasses(theme, componentName, componentClasses, props.classes, props.className),\n        [theme, props.classes, props.className],\n      );\n      const constants = useMemo(() => mergeThemeConstants(theme, componentName, componentValues, props.constants), [\n        theme,\n        props.constants,\n      ]);\n      return <Component {...props} classes={classes} constants={constants} ref={ref} />;\n    }) as unknown) as ThemableComponent<P>;\n  };\n};\n","type ElectionScope_<T> =\n  | { type: \"national\" }\n  | { type: \"county\"; countyId: T }\n  | { type: \"locality\"; countyId: T; localityId: T }\n  | { type: \"diaspora\" }\n  | { type: \"diaspora_country\"; countryId: T };\n\nexport type ElectionScope = ElectionScope_<number>;\nexport type ElectionScopeIncomplete = ElectionScope_<number | null>;\n\nexport type ElectionScopeCompleteness = {\n  complete: ElectionScope | null;\n  missingCounty: boolean;\n  missingLocality: boolean;\n  missingCountry: boolean;\n};\n\nexport const electionScopeIsComplete = (scope: ElectionScopeIncomplete): ElectionScopeCompleteness => {\n  const missingCounty = (scope.type === \"county\" || scope.type === \"locality\") && scope.countyId == null;\n  const missingLocality = scope.type === \"locality\" && scope.localityId == null;\n  const missingCountry = scope.type === \"diaspora_country\" && scope.countryId == null;\n  return {\n    complete: !missingCounty && !missingLocality && !missingCountry ? ((scope as unknown) as ElectionScope) : null,\n    missingCounty,\n    missingLocality,\n    missingCountry,\n  };\n};\n\nexport type ElectionScopeNames = {\n  countyName?: string | null;\n  countryName?: string | null;\n  localityName?: string | null;\n};\nexport type ElectionScopeResolved = ElectionScope & ElectionScopeNames;\nexport type ElectionScopeIncompleteResolved = ElectionScopeIncomplete & ElectionScopeNames;\n\nexport type ElectionType =\n  | \"referendum\"\n  | \"president\"\n  | \"senate\"\n  | \"house\"\n  | \"local_council\"\n  | \"county_council\"\n  | \"mayor\"\n  | \"european_parliament\"\n  | string;\n\nexport const electionTypeInvolvesDiaspora = (electionType: ElectionType): boolean =>\n  electionType !== \"local_council\" && electionType !== \"county_council\" && electionType !== \"mayor\";\n\nexport const electionTypeHasSeats = (electionType: ElectionType): boolean =>\n  electionType === \"senate\" ||\n  electionType === \"house\" ||\n  electionType === \"local_council\" ||\n  electionType === \"county_council\" ||\n  electionType === \"european_parliament\";\n\nexport const electionHasSeats = (electionType: ElectionType, results: ElectionResults): boolean =>\n  electionTypeHasSeats(electionType) &&\n  results.candidates.reduce<boolean>((acc, cand) => acc || cand.seats != null, false);\n\nexport type ElectionBallotMeta = {\n  // The app should work with any specified \"type\" in here, including values unknown yet to the frontend\n  // This is just for extra visual customisation like splitting local council results in two tables,\n  // showing the parliament seats widget or showing disapora next to the map or not\n  type: ElectionType;\n  date: string; // ISO 8601\n  title: string; // eg. \"Alegeri locale\"\n  ballot?: string | null; // eg. \"Primar\", maybe find a better name for this?\n  subtitle?: string | null; // eg. \"Pentru trecerea la parlament unicameral și reducerea numărului de parlamentari\"\n  live?: boolean | null; // Send true when the election is ongoing\n\n  ballotId: number; // The ID of this Election (Ballot in the backend, a rename might be in order)\n  electionId: number; // Used for grouping\n\n  // TODO: I haven't the slightest idea what should go in here, but I assume some sort\n  // of an URL/category ID for the blog API\n  newsfeed?: string;\n};\n\n// You get one of these after making a request with an ID and the data in an ElectionScope\n// (url-encoded in the GET request or whatever)\nexport type ElectionBallot = {\n  scope: ElectionScopeResolved;\n  meta: ElectionBallotMeta;\n\n  // These can be missing if the election doesn't support the current scope (eg. local elections with a national scope).\n  turnout?: ElectionTurnout | null;\n  results?: ElectionResults | null;\n\n  // Send this only when it makes sense (for the national scope)\n  observation?: ElectionObservation | null;\n};\n\nexport type ElectionTurnout = {\n  eligibleVoters?: number | null; // Cetățeni cu drept de vot. Nu se aplică pentru diaspora\n  totalVotes: number;\n  breakdown?: ElectionTurnoutBreakdown[] | null;\n};\n\n// Open to extensions\nexport type ElectionTurnoutBreakdownCategoryType =\n  | \"permanent_lists\"\n  | \"supplementary_lists\"\n  | \"mobile_ballot_box\"\n  | \"vote_by_mail\";\n\nexport type ElectionTurnoutBreakdown = {\n  type: \"national\" | \"diaspora\" | \"all\"; // Open to extensions. \"all\" means this chart applies to the whole scope\n  total?: number | null;\n  categories: {\n    type: ElectionTurnoutBreakdownCategoryType;\n    votes: number;\n  }[];\n};\n\nexport type ElectionObservation = {\n  coveredPollingPlaces: number;\n  coveredCounties: number;\n  observerCount: number;\n  messageCount: number;\n  issueCount: number;\n};\n\nexport type ElectionResultsCandidate = {\n  // These still refer to parties in the context of local_council and county_council\n  name: string; // eg. \"Uniunea Salvați România\",\n  shortName?: string | null; // eg. \"USR\"\n  partyColor?: string | null;\n  partyLogo?: string | null; // A URL to a party logo image (square, with transparency, preferably SVG)\n  votes: number;\n  seats?: number | null;\n  seatsGained?: number | \"new\" | null;\n  candidateCount?: number;\n};\n\nexport type ElectionResults = {\n  eligibleVoters?: number | null; // Duplicate this from ElectionTurnout\n  totalVotes: number; // Duplicate this from ElectionTurnout\n  votesByMail?: number | null; // For diaspora\n  validVotes: number;\n  nullVotes: number;\n  totalSeats?: number | null; // For the parliament (maybe even council) seats widget\n  candidates: ElectionResultsCandidate[]; // Sorted descending by votes\n};\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { ComponentProps, ComponentType, forwardRef } from \"react\";\nimport { mergeClasses, PropsObject, themable, ThemableComponent, ThemedComponentProps } from \"../../util/theme\";\nimport cssClasses from \"./Typography.module.scss\";\n\nexport function makeTypographyComponent<Props extends PropsObject>(\n  Component: ComponentType<Props> | string,\n  className: string,\n  extraClassName?: string,\n): ThemableComponent<Props> {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const Component_: any = Component;\n  return themable<Props>(\n    \"Typography\",\n    cssClasses,\n  )(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    forwardRef(function TypographyInner({ classes, constants, ...otherProps }: ThemedComponentProps<Props>, ref) {\n      const finalClassName = mergeClasses(mergeClasses(classes[className], extraClassName), classes.root);\n      return <Component_ {...otherProps} className={finalClassName} ref={ref} />;\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    }) as any,\n  );\n}\n\nexport const Body = makeTypographyComponent<ComponentProps<\"span\">>(\"span\", \"body\");\nexport const BodyMedium = makeTypographyComponent<ComponentProps<\"span\">>(\"span\", \"bodyMedium\");\nexport const BodyLarge = makeTypographyComponent<ComponentProps<\"span\">>(\"span\", \"bodyLarge\");\nexport const BodyHuge = makeTypographyComponent<ComponentProps<\"span\">>(\"span\", \"bodyHuge\");\nexport const Label = makeTypographyComponent<ComponentProps<\"span\">>(\"span\", \"label\");\nexport const LabelMedium = makeTypographyComponent<ComponentProps<\"span\">>(\"span\", \"labelMedium\");\nexport const Heading1 = makeTypographyComponent<ComponentProps<\"h1\">>(\"h1\", \"h1\");\nexport const Heading2 = makeTypographyComponent<ComponentProps<\"h2\">>(\"h2\", \"h2\");\nexport const Heading3 = makeTypographyComponent<ComponentProps<\"h3\">>(\"h3\", \"h3\");\nexport const DivBody = makeTypographyComponent<ComponentProps<\"div\">>(\"div\", \"body\");\nexport const DivBodyMedium = makeTypographyComponent<ComponentProps<\"div\">>(\"div\", \"bodyMedium\");\nexport const DivBodyLarge = makeTypographyComponent<ComponentProps<\"div\">>(\"div\", \"bodyLarge\");\nexport const DivBodyHuge = makeTypographyComponent<ComponentProps<\"div\">>(\"div\", \"bodyHuge\");\nexport const DivLabel = makeTypographyComponent<ComponentProps<\"div\">>(\"div\", \"label\");\nexport const DivLabelMedium = makeTypographyComponent<ComponentProps<\"div\">>(\"div\", \"labelMedium\");\nexport const DivHeading1 = makeTypographyComponent<ComponentProps<\"h1\">>(\"div\", \"h1\");\nexport const DivHeading2 = makeTypographyComponent<ComponentProps<\"h2\">>(\"div\", \"h2\");\nexport const DivHeading3 = makeTypographyComponent<ComponentProps<\"h3\">>(\"div\", \"h3\");\nexport const Underlined = makeTypographyComponent<ComponentProps<\"span\">>(\"span\", \"underlined\");\n","import React, { ComponentProps, forwardRef } from \"react\";\nimport { themable, ThemedComponent, ThemedComponentProps } from \"../../util/theme\";\nimport cssClasses from \"./Button.module.scss\";\n\nexport const Button = themable<ComponentProps<\"button\">>(\n  \"Button\",\n  cssClasses,\n)(\n  // eslint-disable-next-line react/display-name\n  (forwardRef<HTMLButtonElement, ThemedComponentProps<ComponentProps<\"button\">>>(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ({ classes, className, constants, ref, ...otherProps }, forwardedRef) => (\n      <button className={classes.root} {...otherProps} ref={forwardedRef} />\n    ),\n  ) as unknown) as ThemedComponent<ComponentProps<\"button\">>,\n);\n","import React from \"react\";\nimport { themable } from \"../../util/theme\";\nimport cssClasses from \"./ColoredSquare.module.scss\";\n\ntype Props = {\n  color?: string;\n};\n\nexport const ColoredSquare = themable<Props>(\n  \"ColoredSquare\",\n  cssClasses,\n)(({ classes, color }) => <div className={classes.root} style={{ backgroundColor: color }} />);\n","import { ElectionScopeIncompleteResolved } from \"../types/Election\";\n\nexport const formatPercentage = (x: number): string =>\n  new Intl.NumberFormat(\"ro-RO\", {\n    style: \"percent\",\n    maximumFractionDigits: 2,\n  })\n    .format(x)\n    .replace(/\\s+%$/, \"%\");\n\nexport const formatGroupedNumber = (x: number): string =>\n  new Intl.NumberFormat(\"ro-RO\", {\n    useGrouping: true,\n  }).format(x);\n\nexport function getScopeName(scope: ElectionScopeIncompleteResolved): string {\n  switch (scope.type) {\n    case \"national\":\n      return \"Nivel Național\";\n    case \"county\":\n      return scope.countyName ? `Județul ${scope.countyName}` : \"Județ\";\n    case \"locality\":\n      return scope.localityName ? `Localitatea ${scope.localityName}` : \"Localitate\";\n    case \"diaspora\":\n      return \"Diaspora\";\n    case \"diaspora_country\":\n      return scope.countryName ? `Diaspora din ${scope.countryName}` : \"Țară din Diaspora\";\n  }\n}\n\nexport const fractionOf = (x: number, total: number): number => {\n  const percent = x / total;\n  return Number.isFinite(percent) ? percent : 0;\n};\n\nfunction hashCode(s: string): number {\n  let i, h;\n  for (i = 0, h = 0; i < s.length; i++) h = (Math.imul(31, h) + s.charCodeAt(i)) | 0;\n  return h;\n}\n\nfunction mulberry32(a: number): () => number {\n  return function (): number {\n    let t = (a += 0x6d2b79f5);\n    t = Math.imul(t ^ (t >>> 15), t | 1);\n    t ^= t + Math.imul(t ^ (t >>> 7), t | 61);\n    return ((t ^ (t >>> 14)) >>> 0) / 4294967296;\n  };\n}\n\nexport const randomColor = (seed: string): string => {\n  return `hsl(${mulberry32(hashCode(seed))() * 360.0}, 50%, 50%)`;\n};\n\nexport const electionCandidateColor = (candidate: { name: string; partyColor?: string | null }): string =>\n  candidate.partyColor ?? randomColor(candidate.name);\n","import React from \"react\";\nimport cssClasses from \"./PartyResultCard.module.scss\";\nimport { mergeClasses, themable } from \"../../util/theme\";\nimport { formatPercentage } from \"../../util/format\";\nimport { DivBodyMedium, DivHeading1 } from \"../Typography/Typography\";\nimport { ColoredSquare } from \"../ColoredSquare/ColoredSquare\";\n\ntype Props = {\n  name: string;\n  color: string;\n  percentage: number;\n  rightAligned?: boolean;\n  iconUrl?: string;\n};\n\nexport const PartyResultCard = themable<Props>(\n  \"PartyResultCard\",\n  cssClasses,\n)(({ classes, name, color, percentage, rightAligned, iconUrl }) => (\n  <div className={mergeClasses(classes.root, rightAligned && classes.rightAlign)}>\n    {iconUrl && <img className={classes.icon} src={iconUrl} alt={name} />}\n    <div className={classes.column}>\n      <DivBodyMedium className={classes.nameRow}>\n        <ColoredSquare className={classes.square} color={color} />\n        <div className={classes.name}>{name}</div>\n      </DivBodyMedium>\n      <DivHeading1 className={classes.percentage}>{formatPercentage(percentage)}</DivHeading1>\n    </div>\n  </div>\n));\n","import React from \"react\";\nimport { formatGroupedNumber, formatPercentage } from \"../../util/format\";\nimport { themable } from \"../../util/theme\";\nimport { ColoredSquare } from \"../ColoredSquare/ColoredSquare\";\nimport { DivBody, Label } from \"../Typography/Typography\";\nimport cssClasses from \"./PartyResultInline.module.scss\";\n\ntype Props = {\n  name: string;\n  color: string;\n  percentage?: number;\n  votes?: number;\n};\n\nexport const PartyResultInline = themable<Props>(\n  \"PartyResultInline\",\n  cssClasses,\n)(({ classes, name, color, percentage, votes }) => (\n  <DivBody className={classes.root}>\n    <ColoredSquare color={color} className={classes.square} />\n    <div className={classes.text}>\n      <span className={classes.name}>{name}</span>\n      <Label className={classes.votes}>\n        {percentage != null && votes != null && `${formatPercentage(percentage)} (${formatGroupedNumber(votes)})`}\n        {percentage == null && votes != null && formatGroupedNumber(votes)}\n        {percentage != null && votes == null && formatPercentage(percentage)}\n      </Label>\n    </div>\n  </DivBody>\n));\n","import React, { ReactNode } from \"react\";\nimport cssClasses from \"./HorizontalStackedBar.module.scss\";\nimport { themable } from \"../../util/theme\";\nimport { DivBody } from \"../Typography/Typography\";\n\nexport type HorizontalStackedBarItem = {\n  value: number;\n  color: string;\n  className?: string;\n};\n\ntype Props = {\n  total?: number; // Defaults to the max value in items\n  items: HorizontalStackedBarItem[];\n  labelLeft?: ReactNode;\n  labelRight?: ReactNode;\n};\n\nexport const HorizontalStackedBar = themable<Props>(\n  \"PercentageBars\",\n  cssClasses,\n)(({ total, items, labelLeft, labelRight, classes }) => {\n  const multiplier = 100.0 / (total ?? items.reduce((acc, bar) => acc + bar.value, 0));\n  let sum = 0;\n  return (\n    <div className={classes.root}>\n      <svg className={classes.svg} preserveAspectRatio=\"none\" viewBox=\"0 0 100 80\">\n        {items.map((item, index) => {\n          const x = sum * multiplier;\n          sum += item.value;\n          return (\n            <rect\n              key={index}\n              className={item.className}\n              x={x}\n              y={8}\n              width={item.value * multiplier}\n              height={64}\n              fill={item.color}\n            />\n          );\n        })}\n        <line x1={50} x2={50} y1={0} y2={80} vectorEffect=\"non-scaling-stroke\" strokeWidth={1.5} stroke=\"#443F46\" />\n      </svg>\n      {labelLeft != null && <DivBody className={classes.labelLeft}>{labelLeft}</DivBody>}\n      {labelRight != null && <DivBody className={classes.labelRight}>{labelRight}</DivBody>}\n    </div>\n  );\n});\n","import React, { ReactNode } from \"react\";\nimport cssClasses from \"./PercentageBars.module.scss\";\nimport { mergeClasses, themable } from \"../../util/theme\";\n\ntype Props = {\n  total?: number; // Defaults to the max value in items\n  items: {\n    value: number;\n    valueLabel?: ReactNode;\n    color?: string;\n    labelColor?: string;\n    className?: string;\n  }[];\n};\n\nexport const PercentageBars = themable<Props>(\n  \"PercentageBars\",\n  cssClasses,\n)(({ total, items, classes }) => {\n  const multiplier = 100.0 / (total ?? items.reduce((acc, bar) => Math.max(acc, bar.value), 0));\n  return (\n    <div className={classes.root}>\n      {items.map((item, index) => (\n        <div\n          key={index}\n          className={mergeClasses(classes.bar, item.className)}\n          style={{\n            backgroundColor: item.color,\n            width: `${item.value * multiplier}%`,\n          }}\n        >\n          <div className={classes.label}>{item.valueLabel}</div>\n        </div>\n      ))}\n    </div>\n  );\n});\n","import React, { ReactNode } from \"react\";\nimport cssClasses from \"./PercentageBarsLegend.module.scss\";\nimport { mergeClasses, themable } from \"../../util/theme\";\nimport { DivBody } from \"../Typography/Typography\";\n\ntype Props = {\n  items: {\n    legendName: ReactNode;\n    legendValueLabel?: ReactNode; // Defaults to valueLabel\n    legendNote?: ReactNode;\n    legendColor?: string; // Defaults to color\n    legendClassName?: string;\n\n    valueLabel?: ReactNode;\n    color?: string;\n  }[];\n};\n\nfunction exists<T>(x: T | null | 0 | false): T | boolean {\n  return x || false;\n}\n\nexport const PercentageBarsLegend = themable<Props>(\n  \"PercentageBarsLegend\",\n  cssClasses,\n)(({ items, classes }) => {\n  return (\n    <div className={classes.root}>\n      {items.map((item, index) => (\n        <DivBody key={index} className={mergeClasses(classes.item, item.legendClassName)}>\n          <div className={classes.colorSquare} style={{ backgroundColor: item.legendColor ?? item.color }} />\n          <span className={classes.name}>{item.legendName}</span>\n          {exists(item.legendValueLabel ?? item.valueLabel) && (\n            <>\n              {\" - \"}\n              <span className={classes.valueLabel}>{item.legendValueLabel ?? item.valueLabel}</span>\n            </>\n          )}\n          {exists(item.legendNote) && (\n            <>\n              {\" \"}\n              <span className={classes.note}>{item.legendNote}</span>\n            </>\n          )}\n        </DivBody>\n      ))}\n    </div>\n  );\n});\n","import React, { ComponentType, ReactNode } from \"react\";\nimport { themable, ThemableComponentProps } from \"../../util/theme\";\n\ntype Props = {\n  width: number;\n  height: number;\n  yGridSteps: number;\n  yMax: number;\n  fontSize: number;\n  maxBarWidth: number;\n  maxBarSpacing: number;\n  minBarWidth: number;\n  minBarSpacing: number;\n  leftBarMargin: number;\n  rightBarMargin: number;\n  bars: {\n    color: string;\n    value: number;\n  }[];\n  renderLabel: (y: number) => ReactNode;\n};\n\nconst defaultConstants = {\n  gridLabelColor: \"#C1C1C1\",\n  gridColor: \"#E2E2E2\",\n};\n\nexport const BarChart = themable<Props>(\n  \"BarChart\",\n  undefined,\n  defaultConstants,\n)(\n  ({\n    classes,\n    constants,\n    width,\n    height,\n    yGridSteps,\n    yMax,\n    fontSize,\n    renderLabel,\n    maxBarSpacing,\n    minBarSpacing,\n    maxBarWidth,\n    minBarWidth,\n    leftBarMargin,\n    rightBarMargin,\n    bars,\n  }) => {\n    const yScale = (height - fontSize - 2) / yMax;\n\n    const lines = [];\n    const labels = [];\n    for (let i = 0; i <= yGridSteps; i++) {\n      const value = i * (yMax / yGridSteps);\n      const y = Math.round(height - yScale * value);\n      const lineY = y - 0.5; // to account for line width and prevent aliasing;\n      lines.push(<line key={i} stroke={constants.gridColor} x1={0} x2={width} y1={lineY} y2={lineY} />);\n      labels.push(\n        <text\n          key={i}\n          textAnchor=\"end\"\n          x={width}\n          y={y - 2}\n          className={classes.yGridLabel}\n          fill={constants.gridLabelColor}\n          style={{ fontSize }}\n        >\n          {renderLabel(value)}\n        </text>,\n      );\n    }\n\n    const usableBarWidth = width - leftBarMargin - rightBarMargin;\n    const spacingRatio = maxBarSpacing / (maxBarSpacing + maxBarWidth);\n    const desiredStride = usableBarWidth / (bars.length + spacingRatio);\n    const barSpacing = Math.max(minBarSpacing, Math.min(maxBarSpacing, desiredStride * spacingRatio));\n    const barWidth = Math.max(minBarWidth, Math.min(maxBarWidth, desiredStride - barSpacing));\n    const stride = barSpacing + barWidth;\n\n    const barRects = bars.map(({ value, color }, index) => (\n      <rect\n        key={index}\n        x={index * stride + barSpacing}\n        y={height - yScale * value}\n        width={barWidth}\n        height={yScale * value}\n        fill={color}\n      />\n    ));\n\n    return (\n      <svg className={classes.root} width={width} height={height} viewBox={`0 0 ${width} ${height}`}>\n        {lines}\n        {labels}\n        {barRects}\n      </svg>\n    );\n  },\n) as ComponentType<Partial<ThemableComponentProps<Props>>>; // To make defaultProps work\n\nBarChart.defaultProps = {\n  width: 220,\n  height: 100,\n  yGridSteps: 4,\n  yMax: 1.0,\n  fontSize: 10,\n  minBarSpacing: 1,\n  minBarWidth: 1,\n  maxBarSpacing: 24,\n  maxBarWidth: 48,\n  leftBarMargin: 0,\n  rightBarMargin: 40,\n  renderLabel: (x) => x,\n  bars: [],\n};\n","import { useState, useCallback, useLayoutEffect } from \"react\";\nfunction getDimensionObject(node) {\n    var rect = node.getBoundingClientRect();\n    return {\n        width: rect.width,\n        height: rect.height,\n        top: \"x\" in rect ? rect.x : rect.top,\n        left: \"y\" in rect ? rect.y : rect.left,\n        x: \"x\" in rect ? rect.x : rect.left,\n        y: \"y\" in rect ? rect.y : rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n    };\n}\nfunction useDimensions() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        _ref$liveMeasure = _ref.liveMeasure,\n        liveMeasure = _ref$liveMeasure === undefined ? true : _ref$liveMeasure;\n\n    var _useState = useState({}),\n        dimensions = _useState[0],\n        setDimensions = _useState[1];\n\n    var _useState2 = useState(null),\n        node = _useState2[0],\n        setNode = _useState2[1];\n\n    var ref = useCallback(function (node) {\n        setNode(node);\n    }, []);\n    useLayoutEffect(function () {\n        if (node) {\n            var measure = function measure() {\n                return window.requestAnimationFrame(function () {\n                    return setDimensions(getDimensionObject(node));\n                });\n            };\n            measure();\n            if (liveMeasure) {\n                window.addEventListener(\"resize\", measure);\n                window.addEventListener(\"scroll\", measure);\n                return function () {\n                    window.removeEventListener(\"resize\", measure);\n                    window.removeEventListener(\"scroll\", measure);\n                };\n            }\n        }\n    }, [node]);\n    return [ref, dimensions, node];\n}\nexport default useDimensions;\n//# sourceMappingURL=index.js.map","import React, { createContext, useContext, useEffect, useLayoutEffect, useMemo, useRef, useState } from \"react\";\nimport { themable } from \"../../util/theme\";\nimport cssClasses from \"./HereMap.module.scss\";\n\ntype OnFeatureSelect = (featureId: number) => unknown;\n\ntype Props = {\n  className?: string;\n  width: number;\n  height: number;\n  overlayUrl?: string;\n  selectedFeature?: number | null | undefined;\n  onFeatureSelect?: OnFeatureSelect;\n  initialBounds?: {\n    top: number; // Latitude\n    left: number; // Longitude\n    bottom: number; // Latitude\n    right: number; // Longitude\n  };\n  centerOnOverlayBounds?: boolean; // Default true\n};\n\nexport const worldMapBounds = { top: 90, left: 0, bottom: -90, right: 180 };\nexport const romaniaMapBounds = {\n  top: 48.26534497800004,\n  bottom: 43.618995545000075,\n  left: 20.261959895000075,\n  right: 29.715232741000037,\n};\n\nconst loadJS = (src: string) =>\n  new Promise((resolve, reject) => {\n    const script = document.createElement(\"script\");\n    script.addEventListener(\"load\", resolve);\n    script.addEventListener(\"error\", reject);\n    script.src = src;\n    window?.document?.getElementsByTagName(\"head\")[0].appendChild(script);\n  });\n\ntype HereMapsAPI = typeof H;\n\nconst loadHereMaps = async () => {\n  await loadJS(\"https://js.api.here.com/v3/3.1/mapsjs-core.js\");\n  await Promise.all([\n    loadJS(\"https://js.api.here.com/v3/3.1/mapsjs-service.js\"),\n    loadJS(\"https://js.api.here.com/v3/3.1/mapsjs-mapevents.js\"),\n    loadJS(\"https://js.api.here.com/v3/3.1/mapsjs-ui.js\"),\n    loadJS(\"https://js.api.here.com/v3/3.1/mapsjs-data.js\"),\n  ]);\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  return (window as any).H as HereMapsAPI;\n};\n\nlet hereMapsPromise: Promise<HereMapsAPI> | null = null;\nconst getHereMaps = (): Promise<HereMapsAPI> => {\n  if (hereMapsPromise) {\n    return hereMapsPromise;\n  }\n  hereMapsPromise = loadHereMaps();\n  return hereMapsPromise;\n};\n\ngetHereMaps(); // Load on startup\n\nconst useHereMaps = (): HereMapsAPI | null => {\n  const [savedH, setH] = useState<HereMapsAPI | null>(null);\n  useEffect(() => {\n    let set: typeof setH | null = setH;\n    getHereMaps().then((H) => {\n      if (set) {\n        set(H);\n      }\n    });\n    return () => {\n      set = null;\n    };\n  }, []);\n  return savedH;\n};\n\nexport const HereMapsAPIKeyContext = createContext<string>(\"\");\nexport const HereMapsAPIKeyProvider = HereMapsAPIKeyContext.Provider;\n\nconst defaultValues = {\n  featureStroke: \"#FFCC00\",\n  featureFill: \"rgba(255, 204, 0, 0.3)\",\n  featureHoverFill: \"rgba(255, 204, 0, 0.6)\",\n};\n\ntype InstanceVars = {\n  selectedFeature: number | undefined | null;\n  hoveredFeature: { id: number; name: string } | null;\n  onFeatureSelect: OnFeatureSelect | undefined | null;\n  group: H.map.Group | null;\n  features: Map<number, H.map.Polygon> | null;\n  tooltipEl: HTMLDivElement | null;\n  tooltipClassName: string | null;\n  tooltipTop: number;\n  tooltipLeft: number;\n  centerOnOverlayBounds: boolean;\n};\n\nexport const HereMap = themable<Props>(\n  \"HereMap\",\n  cssClasses,\n  defaultValues,\n)(\n  ({\n    classes,\n    constants,\n    width,\n    height,\n    overlayUrl,\n    selectedFeature,\n    onFeatureSelect,\n    initialBounds = worldMapBounds,\n    centerOnOverlayBounds = true,\n  }) => {\n    const H = useHereMaps();\n    const apiKey = useContext(HereMapsAPIKeyContext);\n    const mapRef = useRef<HTMLDivElement>(null);\n    const [map, setMap] = useState<H.Map | null>(null);\n\n    const featureStyles = useMemo(\n      () =>\n        H && {\n          default: new H.map.SpatialStyle({\n            fillColor: constants.featureFill,\n            strokeColor: constants.featureStroke,\n            lineWidth: 2,\n          }),\n          selected: new H.map.SpatialStyle({\n            fillColor: constants.featureStroke,\n            strokeColor: constants.featureStroke,\n            lineWidth: 2,\n          }),\n          hover: new H.map.SpatialStyle({\n            fillColor: constants.featureHoverFill,\n            strokeColor: constants.featureHoverFill,\n            lineWidth: 2,\n          }),\n        },\n      [H, constants.featureFill, constants.featureStroke, constants.featureHoverFill],\n    );\n\n    // Instance vars\n    const inst = useRef<InstanceVars>({\n      selectedFeature,\n      hoveredFeature: null,\n      onFeatureSelect,\n      group: null,\n      features: null,\n      tooltipEl: null,\n      tooltipClassName: classes.tooltip ?? null,\n      tooltipTop: 0,\n      tooltipLeft: 0,\n      centerOnOverlayBounds,\n    });\n\n    useLayoutEffect(() => {\n      if (!H || !apiKey || !mapRef.current) {\n        return;\n      }\n\n      const self = inst.current;\n\n      const platform = new H.service.Platform({\n        apikey: apiKey,\n      });\n      const defaultLayers = platform.createDefaultLayers();\n      const hMap = new H.Map(mapRef.current, defaultLayers.vector.normal.map, {\n        bounds: new H.geo.Rect(initialBounds.top, initialBounds.left, initialBounds.bottom, initialBounds.right),\n        pixelRatio: window.devicePixelRatio || 1,\n      });\n      setMap(hMap);\n\n      new H.mapevents.Behavior(new H.mapevents.MapEvents(hMap));\n      H.ui.UI.createDefault(hMap, defaultLayers);\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      hMap.addEventListener(\"pointermove\", (evt: any) => {\n        const { offsetX = 0, offsetY = 0 } = evt.originalEvent;\n        self.tooltipLeft = offsetX;\n        self.tooltipTop = offsetY;\n        if (self.tooltipEl) {\n          self.tooltipEl.style.left = `${offsetX}px`;\n          self.tooltipEl.style.top = `${offsetY}px`;\n        }\n      });\n\n      return () => {\n        hMap.dispose();\n        (hMap as any).disposed = true; // eslint-disable-line @typescript-eslint/no-explicit-any\n        setMap((state) => (state === hMap ? null : state));\n      };\n    }, [H, apiKey, mapRef]);\n\n    useLayoutEffect(() => {\n      if (map) {\n        map.getViewPort().resize();\n      }\n    }, [width, height, map]);\n\n    // Whenever selectedFeature changes\n    useLayoutEffect(() => {\n      if (!featureStyles) return;\n\n      const self = inst.current;\n      const { features, selectedFeature: lastSelectedFeature, hoveredFeature } = self;\n      self.selectedFeature = selectedFeature;\n\n      // De-select previously selected feature\n      if (features && typeof lastSelectedFeature === \"number\") {\n        const feature = features.get(lastSelectedFeature);\n        if (feature) {\n          feature.setStyle(lastSelectedFeature === hoveredFeature?.id ? featureStyles.hover : featureStyles.default);\n        }\n      }\n\n      // Select new feature\n      if (features && typeof selectedFeature === \"number\") {\n        const feature = features.get(selectedFeature);\n        if (feature) {\n          feature.setStyle(featureStyles.selected);\n        }\n      }\n    }, [selectedFeature]);\n\n    useLayoutEffect(() => {\n      inst.current.onFeatureSelect = onFeatureSelect;\n    }, [onFeatureSelect]);\n\n    useLayoutEffect(() => {\n      inst.current.centerOnOverlayBounds = centerOnOverlayBounds;\n    }, [centerOnOverlayBounds]);\n\n    useLayoutEffect(() => {\n      const self = inst.current;\n      self.tooltipClassName = classes.tooltip;\n      if (self.tooltipEl) {\n        self.tooltipEl.className = classes.tooltip;\n      }\n    }, [classes.tooltip]);\n\n    useLayoutEffect(() => {\n      if (!H || !map || !overlayUrl || !featureStyles) return;\n      const self = inst.current;\n\n      const setHoveredFeature = (id: number | null, name: string | null) => {\n        const hadTooltip = !!self.hoveredFeature;\n        const hasTooltip = id != null && name != null;\n        self.hoveredFeature = id != null && name != null ? { id, name } : null;\n\n        if (!hadTooltip && hasTooltip) {\n          const tooltipEl = document.createElement(\"div\");\n          tooltipEl.className = self.tooltipClassName || \"\";\n          tooltipEl.style.left = `${self.tooltipLeft}px`;\n          tooltipEl.style.top = `${self.tooltipTop}px`;\n          mapRef.current?.appendChild(tooltipEl);\n          self.tooltipEl = tooltipEl;\n        } else if (hadTooltip && !hasTooltip) {\n          self.tooltipEl?.remove();\n          self.tooltipEl = null;\n        }\n\n        if (name && self.tooltipEl) {\n          self.tooltipEl.innerText = name;\n        }\n      };\n\n      const onPointerEnter: EventListener = (evt) => {\n        const mapObject = evt.target;\n        if (mapObject instanceof H.map.Polygon) {\n          const data = mapObject.getData();\n          const id = data?.id;\n          const isCurrent = id === self.selectedFeature;\n          setHoveredFeature(id, data?.name);\n          if (!isCurrent) {\n            mapObject.setStyle(featureStyles.hover);\n          }\n        }\n      };\n\n      const onPointerLeave: EventListener = (evt) => {\n        const mapObject = evt.target;\n        if (mapObject instanceof H.map.Polygon) {\n          const data = mapObject.getData();\n          const id = data?.id;\n          const isCurrent = id === self.selectedFeature;\n          if (self.hoveredFeature?.id === id) {\n            setHoveredFeature(null, null);\n          }\n          mapObject.setStyle(isCurrent ? featureStyles.selected : featureStyles.default);\n        }\n      };\n\n      const onTap: EventListener = (evt) => {\n        const mapObject = evt.target;\n        if (mapObject instanceof H.map.Polygon) {\n          const id = mapObject.getData()?.id;\n          const { onFeatureSelect: callback } = self;\n          if (callback && typeof id === \"number\") {\n            callback(id);\n          }\n        }\n      };\n\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      const reader: H.data.AbstractReader = new (H.data as any).geojson.Reader(overlayUrl, {\n        disableLegacyMode: true,\n        style: (mapObject: H.map.Object) => {\n          if (mapObject instanceof H.map.Polygon) {\n            const data = mapObject.getData();\n            mapObject.setStyle(data?.id === self.selectedFeature ? featureStyles.selected : featureStyles.default);\n            mapObject.addEventListener(\"pointerenter\", onPointerEnter);\n            mapObject.addEventListener(\"pointerleave\", onPointerLeave);\n          }\n        },\n      });\n\n      let group: H.map.Group | null = null;\n\n      reader.addEventListener(\"statechange\", () => {\n        if (reader.getState() !== H.data.AbstractReader.State.READY) return;\n\n        group = (reader.getParsedObjects().find((object) => {\n          if (object instanceof H.map.Group) {\n            return true;\n          }\n        }) as unknown) as H.map.Group;\n\n        if (!group) return;\n\n        const features = new Map<number, H.map.Polygon>();\n        group.getObjects().forEach((object) => {\n          if (object instanceof H.map.Polygon) {\n            const id = object.getData()?.id;\n            if (typeof id === \"number\") {\n              features.set(id, object);\n            }\n          }\n        });\n        self.features = features;\n\n        group.addEventListener(\"tap\", onTap);\n        map.addObject(group);\n\n        if (self.centerOnOverlayBounds) {\n          map.getViewModel().setLookAtData({ bounds: group.getBoundingBox() }, true);\n        }\n      });\n      reader.parse();\n\n      return () => {\n        self.hoveredFeature = null;\n        self.features = null;\n        self.tooltipEl?.remove();\n        self.tooltipEl = null;\n\n        reader.dispose();\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if (group && !(map as any).disposed) {\n          map.removeObject(group);\n          group = null;\n        }\n      };\n    }, [H, map, overlayUrl]);\n\n    if (!H || !apiKey) {\n      return null;\n    }\n\n    return <div className={classes.root} ref={mapRef} style={{ width, height }} />;\n  },\n);\n","import React, { PropsWithChildren, useMemo } from \"react\";\nimport { ElectionScopeIncomplete } from \"../../types/Election\";\nimport { themable } from \"../../util/theme\";\nimport cssClasses from \"./ElectionMap.module.scss\";\nimport RomaniaMap from \"../../assets/romania-map.svg\";\nimport WorldMap from \"../../assets/world-map.svg\";\nimport useDimensions from \"react-use-dimensions\";\nimport { HereMap, romaniaMapBounds, worldMapBounds } from \"../HereMap/HereMap\";\nimport { electionMapOverlayUrl } from \"../../constants/servers\";\n\ntype Props = PropsWithChildren<{\n  scope: ElectionScopeIncomplete;\n  onScopeChange?: (scope: ElectionScopeIncomplete) => unknown;\n  involvesDiaspora?: boolean; // electionTypeInvolvesDiaspora(election.meta.type)\n  aspectRatio?: number;\n  maxHeight?: number;\n}>;\n\nconst defaultAspectRatio = 21 / 15;\nconst defaultDiasporaAspectRatio = 38 / 25;\nconst defaultMaxHeight = 460;\n\nexport const ElectionMap = themable<Props>(\n  \"ElectionMap\",\n  cssClasses,\n)(({ classes, scope, onScopeChange, involvesDiaspora, aspectRatio, maxHeight = defaultMaxHeight, children }) => {\n  const [ref, { width = 0 }] = useDimensions();\n\n  const showsSimpleMap = scope.type === \"national\";\n  const ar = aspectRatio ?? (showsSimpleMap && involvesDiaspora ? defaultDiasporaAspectRatio : defaultAspectRatio);\n  let height = Math.min(maxHeight, width / ar);\n  if (!Number.isFinite(height)) {\n    height = 0;\n  }\n\n  const [overlayUrl, selectedFeature, scopeModifier] = useMemo<\n    [string, number | null, (featureId: number) => ElectionScopeIncomplete]\n  >(() => {\n    if (scope.type === \"locality\" && scope.countyId != null) {\n      return [\n        `${electionMapOverlayUrl}/localities_${scope.countyId}.geojson`,\n        scope.localityId ?? null,\n        (localityId) => ({ ...scope, localityId }),\n      ];\n    }\n    if ((scope.type === \"locality\" && scope.countyId == null) || scope.type === \"county\") {\n      return [\n        `${electionMapOverlayUrl}/counties.geojson`,\n        scope.countyId ?? null,\n        (countyId) => ({ ...scope, countyId }),\n      ];\n    }\n    if (scope.type === \"diaspora\" || scope.type === \"diaspora_country\") {\n      return [\n        `${electionMapOverlayUrl}/diaspora_countries.geojson`,\n        scope.type === \"diaspora_country\" && scope.countryId != null ? scope.countryId : null,\n        (countryId) => ({ type: \"diaspora_country\", countryId }),\n      ];\n    }\n    return [`${electionMapOverlayUrl}/dobrogea.geojson`, null, (countyId) => ({ type: \"county\", countyId })];\n  }, [scope]);\n\n  const onFeatureSelect = useMemo(\n    () =>\n      onScopeChange &&\n      ((featureId: number) => {\n        onScopeChange(scopeModifier(featureId));\n      }),\n    [onScopeChange, scopeModifier],\n  );\n\n  return (\n    <div className={classes.root} ref={ref} style={{ height }}>\n      <div className={classes.container} style={{ width, height }}>\n        {showsSimpleMap ? (\n          <div className={classes.staticMap} style={{ maxWidth: height * ar, fontSize: height * ar * 0.05 }}>\n            <div className={classes.staticMapRomaniaContainer}>\n              <RomaniaMap className={classes.staticMapRomania} />\n              {children}\n            </div>\n            {involvesDiaspora && (\n              <div className={classes.staticMapWorldContainer} style={{ fontSize: Math.min(16, height * ar * 0.05) }}>\n                <div className={classes.staticMapWorldLabel}>Diaspora</div>\n                <WorldMap className={classes.staticMapWorld} />\n              </div>\n            )}\n          </div>\n        ) : (\n          width > 0 &&\n          height > 0 && (\n            <HereMap\n              className={classes.hereMap}\n              width={width}\n              height={height}\n              initialBounds={\n                scope.type === \"diaspora\" || scope.type === \"diaspora_country\" ? worldMapBounds : romaniaMapBounds\n              }\n              overlayUrl={overlayUrl}\n              selectedFeature={selectedFeature}\n              onFeatureSelect={onFeatureSelect}\n            />\n          )\n        )}\n      </div>\n    </div>\n  );\n});\n","import React, { ComponentProps, forwardRef } from \"react\";\nimport { themable, ThemedComponent, ThemedComponentProps } from \"../../util/theme\";\nimport cssClasses from \"./ResultsTable.module.scss\";\n\nexport const ResultsTable = themable<ComponentProps<\"table\">>(\n  \"ResultsTable\",\n  cssClasses,\n)(\n  // eslint-disable-next-line react/display-name\n  (forwardRef<HTMLTableElement, ThemedComponentProps<ComponentProps<\"table\">>>(\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    ({ classes, className, constants, ...otherProps }, ref) => (\n      <table className={classes.root} {...otherProps} ref={ref} />\n    ),\n  ) as unknown) as ThemedComponent<ComponentProps<\"table\">>,\n);\n","import React from \"react\";\nimport { formatGroupedNumber, formatPercentage } from \"../../util/format\";\nimport { themable, useTheme } from \"../../util/theme\";\nimport { PercentageBars } from \"../PercentageBars/PercentageBars\";\nimport { PercentageBarsLegend } from \"../PercentageBarsLegend/PercentageBarsLegend\";\n\ntype Props = {\n  eligibleVoters: number;\n  totalVotes: number;\n};\n\nexport const ElectionTurnoutBars = themable<Props>(\"ElectionTurnoutBars\")(({ classes, eligibleVoters, totalVotes }) => {\n  const theme = useTheme();\n  const voterRatio = totalVotes / eligibleVoters;\n  const items = [\n    {\n      color: theme.colors.primary,\n      legendName: \"Cetățeni cu drept de vot\",\n      value: 1,\n      valueLabel: formatPercentage(1),\n      legendNote: `(${formatGroupedNumber(eligibleVoters)})`,\n    },\n    {\n      color: theme.colors.secondary,\n      legendName: \"Au votat\",\n      value: voterRatio,\n      valueLabel: formatPercentage(voterRatio),\n      legendNote: `(${formatGroupedNumber(totalVotes)})`,\n    },\n  ];\n  return (\n    <div className={classes.root}>\n      <PercentageBars total={1} items={items} />\n      <PercentageBarsLegend items={items} />\n    </div>\n  );\n});\n","import React from \"react\";\nimport { ElectionScope, ElectionTurnoutBreakdown } from \"../../types/Election\";\nimport { formatGroupedNumber, formatPercentage } from \"../../util/format\";\nimport { themable } from \"../../util/theme\";\nimport { BarChart } from \"../BarChart/BarChart\";\nimport { PercentageBarsLegend } from \"../PercentageBarsLegend/PercentageBarsLegend\";\nimport cssClasses from \"./ElectionTurnoutBreakdownChart.module.scss\";\nimport useDimensions from \"react-use-dimensions\";\nimport WorldMap from \"../../assets/world-map.svg\";\nimport RomaniaMap from \"../../assets/romania-map.svg\";\n\ntype Props = {\n  value: ElectionTurnoutBreakdown;\n  scope?: ElectionScope | null;\n};\n\nconst categoryColors = {\n  permanent_lists: \"#55505C\",\n  supplementary_lists: \"#5D737E\",\n  mobile_ballot_box: \"#7FC6A4\",\n  vote_by_mail: \"#F1C692\",\n  default: \"#55505C\",\n};\n\nconst categoryLabels = {\n  permanent_lists: \"Votanți liste permanente\",\n  supplementary_lists: \"Votanți liste suplimentare\",\n  mobile_ballot_box: \"Votanți urnă mobilă\",\n  vote_by_mail: \"Votanți prin corespondență\",\n  default: \"Categorie necunoscută\",\n};\n\nconst breakdownTypeLabels = {\n  national: \"România\",\n  diaspora: \"Diaspora\",\n  all: \"\",\n};\n\nconst adjustScale = (x: number) => {\n  let div = 10;\n  while (x * 10 > div) {\n    x = Math.ceil(x / div) * div;\n    div *= 10;\n  }\n  return x;\n};\n\nexport const ElectionTurnoutBreakdownChart = themable<Props>(\n  \"ElectionTurnoutBreakdownChart\",\n  cssClasses,\n)(({ classes, value, scope }) => {\n  const [ref, { width }] = useDimensions();\n\n  let type = value.type;\n  if (type === \"all\" && scope) {\n    if (scope.type === \"national\") {\n      type = \"national\";\n    } else if (scope.type === \"diaspora\") {\n      type = \"diaspora\";\n    }\n  }\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.chartRow}>\n        {type !== \"all\" && (\n          <div className={classes.infoRow}>\n            <div className={classes.typeLabel}>{breakdownTypeLabels[value.type]}</div>\n            <div className={classes.mapIconContainer}>\n              {type === \"diaspora\" && <WorldMap className={classes.worldMapIcon} />}\n              {type === \"national\" && <RomaniaMap className={classes.romaniaMapIcon} />}\n            </div>\n          </div>\n        )}\n        <div className={classes.chartContainer} ref={ref}>\n          <BarChart\n            className={classes.chart}\n            width={width ?? 1}\n            yMax={\n              value.total ?? adjustScale(value.categories.reduce((acc, category) => Math.max(acc, category.votes), 0))\n            }\n            renderLabel={value.total != null ? (x) => formatPercentage(x / (value.total || 0)) : formatGroupedNumber}\n            bars={value.categories.map(({ votes, type: categoryType }) => ({\n              value: votes,\n              color: categoryColors[categoryType] ?? categoryColors.default,\n            }))}\n          />\n        </div>\n      </div>\n      <PercentageBarsLegend\n        items={value.categories.map(({ votes, type: categoryType }) => ({\n          legendName: categoryLabels[categoryType] ?? categoryColors.default,\n          legendColor: categoryColors[categoryType] ?? categoryColors.default,\n          legendValueLabel: value.total != null ? formatPercentage(votes / value.total) : formatGroupedNumber(votes),\n          legendNote: value.total != null && `(${formatGroupedNumber(votes)})`,\n        }))}\n      />\n    </div>\n  );\n});\n","import React from \"react\";\nimport { ElectionScopeCompleteness } from \"../../types/Election\";\nimport { DivBodyHuge, Underlined } from \"../Typography/Typography\";\n\nconst pageName = (page: string | void) => {\n  switch (page) {\n    case \"turnout\":\n      return \"prezența la vot\";\n    case \"results\":\n      return \"rezultatele\";\n    default:\n      return \"datele\";\n  }\n};\n\nconst missingData = (completeness: ElectionScopeCompleteness) => {\n  if (completeness.missingCounty && completeness.missingLocality) {\n    return \"județul și localitatea\";\n  }\n  if (completeness.missingCounty) {\n    return \"județul\";\n  }\n  if (completeness.missingLocality) {\n    return \"localitatea\";\n  }\n  if (completeness.missingCountry) {\n    return \"țara\";\n  }\n  return \"\";\n};\n\ntype Props = {\n  className?: string;\n  completeness: ElectionScopeCompleteness;\n  page?: \"turnout\" | \"results\" | void;\n};\n\nexport const ElectionScopeIncompleteWarning: React.FC<Props> = ({ className, completeness, page }) =>\n  completeness.complete ? null : (\n    <DivBodyHuge className={className}>\n      Pentru a vizualiza {pageName(page)}, te rugăm să selectezi <Underlined>{missingData(completeness)}</Underlined>.\n    </DivBodyHuge>\n  );\n","import React from \"react\";\nimport {\n  ElectionBallotMeta,\n  ElectionScopeIncompleteResolved,\n  electionScopeIsComplete,\n  ElectionTurnout,\n  electionTypeInvolvesDiaspora,\n} from \"../../types/Election\";\nimport { formatGroupedNumber, formatPercentage, getScopeName } from \"../../util/format\";\nimport { mergeClasses, themable } from \"../../util/theme\";\nimport { ElectionMap } from \"../ElectionMap/ElectionMap\";\nimport { ElectionTurnoutBars } from \"../ElectionTurnoutBars/ElectionTurnoutBars\";\nimport { ElectionTurnoutBreakdownChart } from \"../ElectionTurnoutBreakdownChart/ElectionTurnoutBreakdownChart\";\nimport { DivBodyHuge, Heading2, Label } from \"../Typography/Typography\";\nimport cssClasses from \"./ElectionTurnoutSection.module.scss\";\nimport useDimensions from \"react-use-dimensions\";\nimport BallotCheckmark from \"../../assets/ballot-checkmark.svg\";\nimport { ElectionScopeIncompleteWarning } from \"../Warning/ElectionScopeIncompleteWarning\";\n\ntype Props = {\n  meta: ElectionBallotMeta;\n  scope: ElectionScopeIncompleteResolved;\n  turnout?: ElectionTurnout | null;\n};\n\nconst defaultConstants = {\n  breakpoint1: 1000,\n  breakpoint2: 840,\n  breakpoint3: 480,\n};\n\nexport const ElectionTurnoutSection = themable<Props>(\n  \"ElectionTurnoutSection\",\n  cssClasses,\n  defaultConstants,\n)(({ meta, scope, turnout, classes, constants }) => {\n  const involvesDiaspora = electionTypeInvolvesDiaspora(meta.type);\n\n  const [measureRef, { width }] = useDimensions();\n\n  const completeness = electionScopeIsComplete(scope);\n\n  const map = width != null && (\n    <ElectionMap scope={scope} involvesDiaspora={involvesDiaspora} className={classes.map}>\n      {scope.type === \"national\" && turnout && turnout.eligibleVoters && (\n        <div className={classes.mapOverlay}>\n          <div className={classes.mapOverlayPercentage}>\n            {formatPercentage(turnout.totalVotes / turnout.eligibleVoters)}\n          </div>\n          <div className={classes.mapOverlayLabel}>Total prezență la vot în România și Diaspora</div>\n        </div>\n      )}\n    </ElectionMap>\n  );\n\n  const { breakpoint1, breakpoint2, breakpoint3 } = constants;\n  const mobileMap = width != null && width <= breakpoint3;\n  const fullWidthMap =\n    !mobileMap && width != null && width <= (scope.type === \"national\" && involvesDiaspora ? breakpoint1 : breakpoint2);\n\n  const showHeading = turnout != null && completeness.complete;\n\n  return (\n    <>\n      {mobileMap && map}\n      {showHeading && (\n        <>\n          <Heading2>Prezența la vot</Heading2>\n          <div>\n            <Label>{getScopeName(scope)}</Label>\n          </div>\n        </>\n      )}\n      {!completeness.complete && (\n        <ElectionScopeIncompleteWarning className={classes.warning} completeness={completeness} page=\"turnout\" />\n      )}\n      {turnout == null && completeness.complete && (\n        <DivBodyHuge className={classes.warning}>\n          Nu există date despre prezența la vot pentru acest nivel de detaliu.\n        </DivBodyHuge>\n      )}\n      {turnout && turnout.eligibleVoters != null && (\n        <ElectionTurnoutBars\n          className={classes.percentageBars}\n          eligibleVoters={turnout.eligibleVoters}\n          totalVotes={turnout.totalVotes}\n        />\n      )}\n      <div style={{ width: \"100%\" }} ref={measureRef} />\n      <div\n        className={mergeClasses(\n          mergeClasses(classes.mapBreakdownContainer, fullWidthMap && classes.mapBreakdownContainerFullWidth),\n          mobileMap && classes.mapBreakdownContainerMobile,\n        )}\n      >\n        {turnout && completeness.complete && ((turnout.breakdown?.length ?? 0) > 0 || turnout.eligibleVoters == null) && (\n          <div className={classes.breakdownContainer}>\n            {turnout.eligibleVoters == null && (\n              <div className={mergeClasses(classes.breakdown, classes.totalVotesContainer)}>\n                <BallotCheckmark />\n                <div className={classes.totalVotesLabels}>\n                  <div className={classes.totalVotesCount}>{formatGroupedNumber(turnout.totalVotes)}</div>\n                  <div className={classes.totalVotesLabel}>Votanți {getScopeName(scope)}</div>\n                </div>\n              </div>\n            )}\n            {turnout.breakdown?.map((breakdown, index) => (\n              <ElectionTurnoutBreakdownChart\n                key={index}\n                className={classes.breakdown}\n                value={breakdown}\n                scope={completeness.complete}\n              />\n            ))}\n          </div>\n        )}\n        {!mobileMap && map}\n      </div>\n    </>\n  );\n});\n","import React, { PropsWithChildren, ReactNode } from \"react\";\nimport { ElectionObservation } from \"../../types/Election\";\nimport { formatGroupedNumber } from \"../../util/format\";\nimport { ClassNames, themable, useTheme } from \"../../util/theme\";\nimport { DivBodyLarge, Heading2 } from \"../Typography/Typography\";\nimport cssClasses from \"./ElectionObservationSection.module.scss\";\nimport BallotDrop from \"../../assets/ballot-drop.svg\";\nimport RaisedHands from \"../../assets/raised-hands.svg\";\nimport RomaniaCountyMap from \"../../assets/romania-county-map.svg\";\nimport { PercentageBars } from \"../PercentageBars/PercentageBars\";\nimport { PercentageBarsLegend } from \"../PercentageBarsLegend/PercentageBarsLegend\";\n\ntype Props = {\n  observation: ElectionObservation;\n};\n\nconst ShowcaseItem: React.FC<PropsWithChildren<{ classes: ClassNames; icon: ReactNode; value: number }>> = ({\n  classes,\n  icon,\n  value,\n  children,\n}) => (\n  <div className={classes.showcaseItem}>\n    <div className={classes.showcaseIcon}>{icon}</div>\n    <div className={classes.showcaseValue}>{formatGroupedNumber(value)}</div>\n    <DivBodyLarge className={classes.showcaseText}>{children}</DivBodyLarge>\n  </div>\n);\n\nexport const ElectionObservationSection = themable<Props>(\n  \"ElectionObservationSection\",\n  cssClasses,\n)(({ observation, classes }) => {\n  const theme = useTheme();\n  const items = [\n    {\n      color: theme.colors.primary,\n      legendName: \"Mesaje trimise de către observatori\",\n      value: observation.messageCount,\n      valueLabel: formatGroupedNumber(observation.messageCount),\n    },\n    {\n      color: theme.colors.secondary,\n      legendName: \"Probleme sesizate\",\n      value: observation.issueCount,\n      valueLabel: formatGroupedNumber(observation.issueCount),\n    },\n  ];\n\n  return (\n    <div className={classes.root}>\n      <Heading2>Observarea independentă a alegerilor</Heading2>\n      <DivBodyLarge>\n        Aceste date sunt colectate prin aplicația{\" \"}\n        <a href=\"https://monitorizarevot.ro\" target=\"_blank\" rel=\"noreferrer\">\n          Monitorizare Vot\n        </a>\n        , dezvoltată de{\" \"}\n        <a href=\"https://code4.ro\" target=\"_blank\" rel=\"noreferrer\">\n          Code for Romania\n        </a>\n        , de la observatorii independenți acreditați în secțiile de votare acoperite.\n      </DivBodyLarge>\n      <div className={classes.showcase}>\n        <ShowcaseItem classes={classes} icon={<BallotDrop />} value={observation.coveredPollingPlaces}>\n          Secții de votare acoperite\n        </ShowcaseItem>\n        <ShowcaseItem classes={classes} icon={<RomaniaCountyMap />} value={observation.coveredCounties}>\n          Județe acoperite\n        </ShowcaseItem>\n        <ShowcaseItem classes={classes} icon={<RaisedHands />} value={observation.observerCount}>\n          Observatori logați în aplicație\n        </ShowcaseItem>\n      </div>\n      <PercentageBars items={items} />\n      <PercentageBarsLegend items={items} />\n    </div>\n  );\n});\n","import React, { useMemo } from \"react\";\nimport { ElectionResults } from \"../../types/Election\";\nimport { themable } from \"../../util/theme\";\nimport { HorizontalStackedBar, HorizontalStackedBarItem } from \"../HorizontalStackedBar/HorizontalStackedBar\";\nimport { PartyResultCard } from \"../PartyResultCard/PartyResultCard\";\nimport { PartyResultInline } from \"../PartyResultInline/PartyResultInline\";\nimport useDimensions from \"react-use-dimensions\";\nimport cssClasses from \"./ElectionResultsStackedBar.module.scss\";\nimport { electionCandidateColor, fractionOf } from \"../../util/format\";\n\ntype Props = {\n  results: ElectionResults;\n};\n\nconst defaultConstants = {\n  neutralColor: \"#B5B5B5\",\n  maxStackedBarItems: 4,\n  breakpoint1: 850,\n  breakpoint2: 700,\n  breakpoint3: 330,\n};\n\nexport const ElectionResultsStackedBar = themable<Props>(\n  \"ElectionResultsStackedBar\",\n  cssClasses,\n  defaultConstants,\n)(({ classes, results, constants }) => {\n  const { candidates } = results;\n  const { neutralColor, maxStackedBarItems, breakpoint1, breakpoint2, breakpoint3 } = constants;\n\n  const [stackedBarItems, legendItems] = useMemo(() => {\n    const items: (HorizontalStackedBarItem & {\n      name: string;\n      percent: number;\n      logo?: string | null;\n      index: number;\n    })[] = [];\n\n    const stackedBarCount = candidates.length === maxStackedBarItems + 1 ? maxStackedBarItems + 1 : maxStackedBarItems;\n    for (let i = 0; i < stackedBarCount; i++) {\n      const candidate = candidates[i];\n      if (candidate) {\n        const color = electionCandidateColor(candidate);\n        const percent = fractionOf(candidate.votes, results.validVotes);\n        items.push({\n          name: candidate.shortName ?? candidate.name,\n          color,\n          value: candidate.votes,\n          percent,\n          logo: candidate.partyLogo,\n          index: items.length,\n        });\n      }\n    }\n\n    if (candidates.length > stackedBarCount) {\n      let total = 0;\n      for (let i = stackedBarCount; i < candidates.length; i++) {\n        total += candidates[i].votes;\n      }\n      items.push({\n        value: total,\n        color: constants.neutralColor,\n        name: \"Alții\",\n        percent: fractionOf(total, results.validVotes),\n        index: items.length,\n      });\n    }\n\n    const stackItems = new Array(items.length);\n    for (let i = 0; i < items.length; i++) {\n      stackItems[i % 2 ? items.length - 1 - (i >> 1) : i >> 1] = items[i];\n    }\n\n    return [stackItems, items];\n  }, [candidates, neutralColor, maxStackedBarItems, breakpoint1, breakpoint2, breakpoint3]);\n\n  const [measureRef, { width = Infinity }] = useDimensions();\n\n  if (candidates.length === 0) {\n    return null;\n  }\n\n  return (\n    <div className={classes.root} ref={measureRef}>\n      <div className={classes.cards}>\n        {stackedBarItems.map(\n          (item, index) =>\n            (width >= breakpoint2 || item.index < 2) && (\n              <PartyResultCard\n                key={item.index}\n                name={item.name}\n                color={item.color}\n                percentage={item.percent}\n                iconUrl={(width >= breakpoint1 || item.index < 2) && width >= breakpoint3 ? item.logo : undefined}\n                rightAligned={index === stackedBarItems.length - 1}\n              />\n            ),\n        )}\n      </div>\n      <HorizontalStackedBar items={stackedBarItems} />\n      <div className={classes.legend}>\n        {legendItems.map((item) => (\n          <PartyResultInline\n            key={item.index}\n            className={classes.legendItem}\n            name={item.name}\n            color={item.color}\n            votes={item.value}\n            percentage={item.percent}\n          />\n        ))}\n      </div>\n    </div>\n  );\n});\n","import React from \"react\";\nimport { electionHasSeats, ElectionBallotMeta, ElectionResults } from \"../../types/Election\";\nimport { themable } from \"../../util/theme\";\nimport cssClasses from \"./ElectionResultsSummaryTable.module.scss\";\nimport { DivBody, Heading3, makeTypographyComponent } from \"../Typography/Typography\";\nimport { lightFormat, parseISO } from \"date-fns\";\nimport { electionCandidateColor, formatGroupedNumber, formatPercentage, fractionOf } from \"../../util/format\";\nimport { ColoredSquare } from \"../ColoredSquare/ColoredSquare\";\n\ntype Props = {\n  meta: ElectionBallotMeta;\n  results: ElectionResults;\n};\n\nconst THeadRow = makeTypographyComponent(\"th\", \"label\");\nconst TCell = makeTypographyComponent(\"td\", \"bodyMedium\");\n\nexport const ElectionResultsSummaryTable = themable<Props>(\n  \"ElectionResultsSummaryTable\",\n  cssClasses,\n)(({ classes, results, meta }) => {\n  const hasSeats = electionHasSeats(meta.type, results);\n  const maxFraction = results.candidates.reduce(\n    (acc, cand) => Math.max(acc, fractionOf(cand.votes, results.validVotes)),\n    0,\n  );\n\n  return (\n    <div className={classes.root}>\n      <div className={classes.header}>\n        {meta.ballot && <DivBody>{meta.title}</DivBody>}\n        <Heading3>\n          {meta.ballot || meta.title} {lightFormat(parseISO(meta.date), \"yyyy\")}\n        </Heading3>\n      </div>\n      <div className={classes.tableContainer}>\n        <table className={classes.table}>\n          <thead>\n            <tr>\n              <THeadRow>Partid</THeadRow>\n              {hasSeats && <THeadRow>Mand.</THeadRow>}\n              <THeadRow>Voturi</THeadRow>\n              <THeadRow className={classes.percentage}>%</THeadRow>\n              <THeadRow></THeadRow>\n            </tr>\n          </thead>\n          <tbody>\n            {results.candidates.map((candidate, index) => (\n              <tr key={index}>\n                <TCell className={classes.name}>\n                  <ColoredSquare color={electionCandidateColor(candidate)} className={classes.square} />\n                  {candidate.shortName || candidate.name}\n                </TCell>\n                {hasSeats && <TCell>{candidate.seats != null && formatGroupedNumber(candidate.seats)}</TCell>}\n                <TCell>{formatGroupedNumber(candidate.votes)}</TCell>\n                <TCell className={classes.percentage}>\n                  {formatPercentage(fractionOf(candidate.votes, results.validVotes))}\n                </TCell>\n                <td className={classes.barContainer}>\n                  <div\n                    className={classes.bar}\n                    style={{\n                      width: `${100 * fractionOf(fractionOf(candidate.votes, results.validVotes), maxFraction)}%`,\n                      backgroundColor: electionCandidateColor(candidate),\n                    }}\n                  />\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n});\n","import React, { ReactNode } from \"react\";\nimport {\n  ElectionBallotMeta,\n  ElectionResults,\n  ElectionScopeIncompleteResolved,\n  electionScopeIsComplete,\n  electionTypeInvolvesDiaspora,\n} from \"../../types/Election\";\nimport { themable } from \"../../util/theme\";\nimport useDimensions from \"react-use-dimensions\";\nimport cssClasses from \"./ElectionResultsSummarySection.module.scss\";\nimport { ElectionResultsStackedBar } from \"../ElectionResultsStackedBar/ElectionResultsStackedBar\";\nimport { ElectionMap } from \"../ElectionMap/ElectionMap\";\nimport { getScopeName } from \"../../util/format\";\nimport { DivBodyHuge, Heading2, Label } from \"../Typography/Typography\";\nimport { ElectionScopeIncompleteWarning } from \"../Warning/ElectionScopeIncompleteWarning\";\nimport { ElectionResultsSummaryTable } from \"../ElectionResultsSummaryTable/ElectionResultsSummaryTable\";\n\ntype Props = {\n  meta: ElectionBallotMeta;\n  scope: ElectionScopeIncompleteResolved;\n  results?: ElectionResults | null;\n  separator?: ReactNode;\n};\n\nconst defaultConstants = {\n  breakpoint1: 840,\n  breakpoint2: 330,\n};\n\nexport const ElectionResultsSummarySection = themable<Props>(\n  \"ElectionResultsSummarySection\",\n  cssClasses,\n  defaultConstants,\n)(({ classes, results, meta, scope, constants, separator }) => {\n  const involvesDiaspora = electionTypeInvolvesDiaspora(meta.type);\n\n  const [measureRef, { width }] = useDimensions();\n\n  const completeness = electionScopeIsComplete(scope);\n\n  const map = width != null && (\n    <ElectionMap scope={scope} involvesDiaspora={involvesDiaspora} className={classes.map} />\n  );\n\n  const { breakpoint1, breakpoint2 } = constants;\n  const mobileMap = width != null && width <= breakpoint2;\n  const fullWidthMap = !mobileMap && width != null && width <= breakpoint1;\n\n  const showHeading = results != null && completeness.complete;\n\n  return (\n    <>\n      {mobileMap && map}\n      {mobileMap && showHeading && separator}\n      {showHeading && (\n        <>\n          <Heading2>Prezența la vot</Heading2>\n          <div>\n            <Label>{getScopeName(scope)}</Label>\n          </div>\n        </>\n      )}\n      {!completeness.complete && (\n        <ElectionScopeIncompleteWarning className={classes.warning} completeness={completeness} page=\"results\" />\n      )}\n      {results == null && completeness.complete && (\n        <DivBodyHuge className={classes.warning}>\n          Nu există date despre prezența la vot pentru acest nivel de detaliu.\n        </DivBodyHuge>\n      )}\n      {results && <ElectionResultsStackedBar className={classes.stackedBar} results={results} />}\n      <div style={{ width: \"100%\" }} ref={measureRef} />\n      {results && !mobileMap && separator}\n      {!mobileMap && (\n        <div className={classes.mapSummaryContainer}>\n          {!fullWidthMap && results && (\n            <ElectionResultsSummaryTable className={classes.mapSummaryTable} meta={meta} results={results} />\n          )}\n          {map}\n        </div>\n      )}\n    </>\n  );\n});\n","import React, { memo, useCallback, useMemo, useState } from \"react\";\nimport { ElectionResults } from \"../../types/Election\";\nimport { electionCandidateColor, formatGroupedNumber } from \"../../util/format\";\nimport { ClassNames, mergeClasses, themable } from \"../../util/theme\";\nimport { ColoredSquare } from \"../ColoredSquare/ColoredSquare\";\nimport { DivBody, DivLabel } from \"../Typography/Typography\";\nimport useDimensions from \"react-use-dimensions\";\nimport cssClasses from \"./ElectionResultsSeats.module.scss\";\n\ntype Props = {\n  results: ElectionResults;\n};\n\nconst DecorativeIcon = () => (\n  <path\n    // eslint-disable-next-line max-len\n    d=\"M3.72141 35.6231C3.67453 35.8779 3.64811 36.1362 3.63959 36.3945V41.6996C3.6464 43.886 5.00424 45.8405 7.05249 46.6085V54.4145C7.06187 57.0279 9.11694 59.1759 11.7269 59.2995V104.396C9.11694 104.52 7.06187 106.668 7.05249 109.281V117.064C4.99997 117.852 3.64299 119.821 3.63959 122.019V127.208C3.63959 128.176 4.42547 128.961 5.39292 128.961H123.61C124.578 128.961 125.363 128.176 125.363 127.208V122.019C125.359 119.821 124.003 117.852 121.951 117.064V109.235C121.941 106.622 119.886 104.474 117.276 104.35V59.2995C119.886 59.1759 121.941 57.0279 121.951 54.4145V46.6085C123.998 45.8405 125.356 43.886 125.363 41.6996V36.4294C125.355 36.1711 125.328 35.9129 125.281 35.658C126.162 36.0484 127.193 35.6512 127.583 34.7698C127.974 33.8893 127.577 32.8588 126.696 32.4676L65.308 0.202652C64.7957 -0.0675507 64.1837 -0.0675507 63.6715 0.202652L2.28431 32.4326C1.42767 32.8852 1.09951 33.9447 1.55042 34.8014C1.96296 35.5839 2.89376 35.9367 3.72141 35.6231ZM10.5583 49.6463V46.9469H30.7749V49.6233L10.5583 49.6463ZM55.5731 59.3114V104.396C52.9631 104.52 50.908 106.668 50.8986 109.281V116.737H34.2569V109.281C34.2475 106.668 32.1924 104.52 29.5825 104.396V59.2995C32.1924 59.1759 34.2475 57.0279 34.2569 54.4145V46.9469H50.8748V54.4034C50.879 57.0211 52.9358 59.1742 55.55 59.2995L55.5731 59.3114ZM54.4044 49.6463V46.9469H74.6219V49.6233L54.4044 49.6463ZM99.42 59.3114V104.396C96.8101 104.52 94.7541 106.668 94.7448 109.281V116.737H78.1039V109.281C78.0945 106.668 76.0386 104.52 73.4294 104.396V59.2995C76.0386 59.1759 78.0945 57.0279 78.1039 54.4145V46.9469H94.7218V54.4034C94.7252 57.0211 96.7819 59.1742 99.3962 59.2995L99.42 59.3114ZM98.2514 49.6463V46.9469H118.468V49.6233L98.2514 49.6463ZM118.468 114.061V116.737H98.2276V114.061H118.468ZM74.6219 114.061V116.737H54.3814V114.061H74.6219ZM57.3025 55.8286H55.7836C55.0088 55.8286 54.3814 55.2013 54.3814 54.4264V53.1521H74.598V54.4264C74.598 55.2013 73.9707 55.8286 73.1959 55.8286H57.3025ZM69.9356 59.3344V104.373H59.0559V59.3344H69.9356ZM57.3025 107.879H73.1959C73.9707 107.879 74.598 108.506 74.598 109.281V110.555H54.3814V109.281C54.3814 108.506 55.0088 107.879 55.7836 107.879H57.3025ZM30.7519 114.061V116.737H10.5344V114.061H30.7519ZM10.5344 54.4614V53.1521H30.7519V54.4264C30.7519 55.2013 30.1246 55.8286 29.3489 55.8286H11.9017C11.1362 55.8098 10.5276 55.1799 10.5344 54.4145V54.4614ZM26.0775 59.3694V104.373H15.2089V59.3344L26.0775 59.3694ZM10.5344 109.317C10.5344 108.541 11.1618 107.914 11.9366 107.914H29.3489C30.1246 107.914 30.7519 108.541 30.7519 109.317V110.59H10.5344V109.317ZM121.857 122.09V125.525H7.12239V122.09C7.12239 121.089 7.933 120.277 8.93368 120.277H120.046C121.032 120.277 121.838 121.068 121.857 122.054V122.09ZM118.445 109.317V110.59H98.2276V109.317C98.2276 108.541 98.8549 107.914 99.6297 107.914H117.078C117.825 107.933 118.426 108.533 118.445 109.281V109.317ZM102.902 104.408V59.3344H113.782V104.373L102.902 104.408ZM118.445 54.4614C118.445 55.2362 117.818 55.8635 117.043 55.8635H99.6417C98.8669 55.8635 98.2395 55.2362 98.2395 54.4614V53.1521H118.456L118.445 54.4614ZM64.4897 3.70847L116.692 31.1473H12.2878L64.4897 3.70847ZM7.12239 36.4294C7.12239 35.462 7.90742 34.6769 8.87487 34.6769H120.105C121.072 34.6769 121.857 35.462 121.857 36.4294V41.7354C121.857 42.7029 121.072 43.4879 120.105 43.4879H8.87487C7.90742 43.4879 7.12239 42.7029 7.12239 41.7354V36.4294Z\"\n    fill=\"#EEEEEE\"\n    fillOpacity={0.43}\n  />\n);\n\ntype Dot = {\n  alpha: number;\n  R: number;\n  candidate: number | null;\n};\n\nconst SeatsGraphic: React.FC<{\n  classes: ClassNames;\n  results: ElectionResults;\n  width: number;\n  height: number;\n  selectedCandidate: number | null;\n  onSelectCandidate: (value: number | null) => unknown;\n}> = memo(function SeatsGraphicUnmemoized({ classes, results, width, height, selectedCandidate, onSelectCandidate }) {\n  const totalSeats = results.totalSeats || 1;\n  // Scale the dot size with the total number of dots so that\n  // the total area of the graph remains the same.\n  const r = useMemo(() => 45.345892868 / Math.sqrt(totalSeats), [totalSeats]);\n\n  const [dots, innerRadius] = useMemo(() => {\n    const spacing = 2.3;\n    const dotsArray: Dot[] = [];\n\n    // Determine how many dots fit in each row\n    let R = 100 - r;\n    let seatsLeft = totalSeats;\n    const rows = [];\n    while (seatsLeft > 0) {\n      // Offset the first and last dot by a tiny angle so that they're tangent to the bottom of the viewport\n      const offset = Math.asin(r / R);\n      const seatsOnRow = 1 + Math.max(0, Math.floor(((Math.PI - offset * 2) * R) / (r * spacing)));\n      seatsLeft -= seatsOnRow;\n      rows.push({ R, offset, seatsOnRow });\n      R -= r * spacing;\n    }\n\n    // We might have some empty slots left over that we need to\n    // remove evenly from amongst the rows.\n    if (seatsLeft < 0) {\n      const div = Math.floor(-seatsLeft / rows.length);\n      for (let i = 0; i < rows.length; i += 1) {\n        rows[i].seatsOnRow -= div;\n      }\n      seatsLeft += div * rows.length;\n    }\n\n    // If they don't split evenly, remove the rest starting with the innermost row.\n    if (seatsLeft < 0) {\n      for (let i = rows.length - 1; i >= 0 && seatsLeft < 0; i -= 1) {\n        rows[i].seatsOnRow -= 1;\n        seatsLeft += 1;\n      }\n    }\n\n    // Position each dot in polar coordinates\n    for (let i = 0; i < rows.length; i++) {\n      const { seatsOnRow, offset, R: rowR } = rows[i];\n      const stride = (Math.PI - offset * 2) / (seatsOnRow - 1);\n      for (let j = 0; j < seatsOnRow; j++) {\n        dotsArray.push({ alpha: offset + j * stride, R: rowR, candidate: null });\n      }\n    }\n\n    // Sort the dots radially left to right\n    dotsArray.sort((a, b) => a.alpha - b.alpha);\n\n    // Assign candidates to each dot\n    let start = 0;\n    let end = dotsArray.length - 1;\n    let fromStart = false; // Alternate each candidate left/right\n    results.candidates.forEach((candidate, index) => {\n      let { seats } = candidate;\n      if (Number.isFinite(seats) && seats != null && seats > 0) {\n        fromStart = !fromStart;\n        for (; seats > 0 && start <= end; seats -= 1) {\n          dotsArray[fromStart ? start : end].candidate = index;\n          if (fromStart) {\n            start += 1;\n          } else {\n            end -= 1;\n          }\n        }\n      }\n    });\n\n    return [dotsArray, rows[rows.length - 1]?.R - r];\n  }, [totalSeats, results]);\n\n  const onDeselect = useCallback(() => {\n    onSelectCandidate(null);\n  }, [onSelectCandidate]);\n\n  return (\n    <svg className={classes.svg} viewBox=\"-2 -1 204 102\" width={width} height={height} onMouseLeave={onDeselect}>\n      <path\n        d={`\n          M -5 100\n          A 105 105 0 0 1 205 100\n          L ${100 + innerRadius - 5} 100\n          A ${innerRadius - 5} ${innerRadius - 5} 0 0 0 ${100 - innerRadius + 5} 100\n          L -5 100\n        `}\n        fill=\"transparent\"\n        stroke=\"transparent\"\n        onMouseLeave={onDeselect}\n      />\n      {dots.map((dot, index) => (\n        <circle\n          key={index}\n          r={r}\n          cx={100 - dot.R * Math.cos(dot.alpha)}\n          cy={100 - dot.R * Math.sin(dot.alpha)}\n          fill={dot.candidate != null ? electionCandidateColor(results.candidates[dot.candidate]) : \"#ccc\"}\n          strokeWidth={selectedCandidate !== null && selectedCandidate === dot.candidate ? 1 : 0}\n          stroke=\"#000\"\n          onMouseOver={() => {\n            onSelectCandidate(dot.candidate);\n          }}\n        />\n      ))}\n      <g transform=\"translate(100 78.75) scale(0.33 0.33) translate(-64.5 -64.5)\">\n        <DecorativeIcon />\n      </g>\n      <text x={100} y={85} dominantBaseline=\"middle\" className={classes.seatCount}>\n        {formatGroupedNumber(totalSeats)}\n      </text>\n    </svg>\n  );\n});\n\nconst defaultConstants = {\n  breakpoint: 560,\n  height: 200,\n};\n\nexport const ElectionResultsSeats = themable<Props>(\n  \"ElectionResultsSeats\",\n  cssClasses,\n  defaultConstants,\n)(({ classes, constants, results }) => {\n  const [measureRef, { width = NaN }] = useDimensions();\n  let svgHeight = constants.height;\n  let svgWidth = constants.height * 2;\n  if (svgWidth > width) {\n    svgWidth = width;\n    svgHeight = svgWidth * 0.5;\n  }\n\n  const vertical = width < constants.breakpoint;\n\n  const [selectedCandidate, setSelectedCandidate] = useState<number | null>(null);\n\n  return (\n    <div className={mergeClasses(classes.root, vertical && classes.vertical)} ref={measureRef}>\n      <div className={classes.legend}>\n        {results.candidates.map((candidate, index) =>\n          Number.isFinite(candidate.seats) && candidate.seats != null && candidate.seats > 0 ? (\n            <DivBody className={classes.legendItem} key={index}>\n              <ColoredSquare className={classes.square} color={electionCandidateColor(candidate)} />\n              <div\n                className={mergeClasses(\n                  classes.legendLabel,\n                  index === selectedCandidate && classes.legendLabelSelected,\n                )}\n              >\n                {candidate.shortName ?? candidate.name}\n              </div>\n              <DivLabel className={classes.legendValue}>&nbsp;({formatGroupedNumber(candidate.seats)})</DivLabel>\n            </DivBody>\n          ) : null,\n        )}\n      </div>\n      <div className={classes.svgContainer}>\n        <SeatsGraphic\n          classes={classes}\n          results={results}\n          width={svgWidth}\n          height={svgHeight}\n          selectedCandidate={selectedCandidate}\n          onSelectCandidate={setSelectedCandidate}\n        />\n      </div>\n    </div>\n  );\n});\n","import React, { useCallback, useState } from \"react\";\nimport { ResultsTable } from \"../ResultsTable/ResultsTable\";\nimport { Heading2 } from \"../Typography/Typography\";\nimport { electionHasSeats, ElectionBallotMeta, ElectionResults, ElectionResultsCandidate } from \"../../types/Election\";\nimport { formatGroupedNumber, formatPercentage, fractionOf } from \"../../util/format\";\nimport { ClassNames, themable } from \"../../util/theme\";\nimport cssClasses from \"./ElectionResultsTableSection.module.scss\";\nimport { Button } from \"../Button/Button\";\n\ntype Props = {\n  meta: ElectionBallotMeta;\n  results: ElectionResults;\n};\n\nconst CandidateTable: React.FC<{\n  classes: ClassNames;\n  validVotes: number;\n  candidates: ElectionResultsCandidate[];\n  hasSeats: boolean;\n}> = ({ classes, validVotes, candidates, hasSeats }) => {\n  const hasSeatsGained = hasSeats && candidates.reduce((acc, candidate) => acc || candidate.seatsGained != null, false);\n  const hasCandidateCount = candidates.reduce((acc, candidate) => acc || candidate.candidateCount != null, false);\n\n  const [collapsed, setCollapsed] = useState<boolean>(true);\n  const canCollapse = candidates.length >= 8;\n\n  const onToggleCollapsed = useCallback(() => {\n    setCollapsed((x) => !x);\n  }, []);\n\n  return (\n    <div className={classes.tableContainer}>\n      <ResultsTable className={classes.table}>\n        <thead>\n          <tr>\n            <th>Partid / Alianță / Candidat independent</th>\n            {hasCandidateCount && <th>Nr. cand.</th>}\n            <th>Voturi</th>\n            <th>%</th>\n            {hasSeats && <th>Mandate</th>}\n            {hasSeatsGained && <th>+/-</th>}\n          </tr>\n        </thead>\n        <tbody>\n          {candidates.map(\n            (candidate, index) =>\n              (!(canCollapse && collapsed) || index < 5) && (\n                <tr key={index}>\n                  <td className={classes.nameCell}>{candidate.name}</td>\n                  {hasCandidateCount && <th>{formatGroupedNumber(candidate.candidateCount || 0)}</th>}\n                  <td>{formatGroupedNumber(candidate.votes)}</td>\n                  <td>{formatPercentage(fractionOf(candidate.votes, validVotes))}</td>\n                  {hasSeats && <td>{formatGroupedNumber(candidate.seats || 0)}</td>}\n                  {hasSeatsGained && (\n                    <td>\n                      {typeof candidate.seatsGained === \"number\"\n                        ? formatGroupedNumber(candidate.seatsGained)\n                        : candidate.seatsGained === \"new\"\n                        ? \"Nou\"\n                        : candidate.seatsGained}\n                    </td>\n                  )}\n                </tr>\n              ),\n          )}\n        </tbody>\n      </ResultsTable>\n      {canCollapse && (\n        <Button className={classes.collapseButton} onClick={onToggleCollapsed}>\n          {collapsed ? \"Afișează toți candidații\" : \"Ascunde toți candidații\"}\n        </Button>\n      )}\n    </div>\n  );\n};\n\nexport const ElectionResultsTableSection = themable<Props>(\n  \"ElectionResultsTableSection\",\n  cssClasses,\n)(({ classes, results, meta }) => {\n  const hasSeats = electionHasSeats(meta.type, results);\n\n  const qualified = hasSeats\n    ? results.candidates.filter((cand) => Number.isFinite(cand.seats) && (cand.seats || 0) > 0)\n    : results.candidates;\n\n  const unqualified = hasSeats\n    ? results.candidates.filter((cand) => !Number.isFinite(cand.seats) || (cand.seats || 0) <= 0)\n    : null;\n\n  if (unqualified && unqualified.length > 0) {\n    return (\n      <>\n        <Heading2 className={classes.heading}>Partide care au îndeplinit pragul electoral</Heading2>\n        <CandidateTable classes={classes} candidates={qualified} hasSeats={hasSeats} validVotes={results.validVotes} />\n        <Heading2 className={classes.heading}>Partide care nu au îndeplinit pragul electoral</Heading2>\n        <CandidateTable classes={classes} candidates={unqualified} hasSeats={false} validVotes={results.validVotes} />\n      </>\n    );\n  }\n\n  return (\n    <CandidateTable classes={classes} candidates={qualified} hasSeats={hasSeats} validVotes={results.validVotes} />\n  );\n});\n","import React, { PropsWithChildren, ReactNode } from \"react\";\nimport { ElectionResults } from \"../../types/Election\";\nimport { formatGroupedNumber } from \"../../util/format\";\nimport { ClassNames, themable } from \"../../util/theme\";\nimport { DivBodyHuge, Heading2 } from \"../Typography/Typography\";\nimport cssClasses from \"./ElectionResultsProcess.module.scss\";\nimport BallotFillIn from \"../../assets/ballot-fill-in.svg\";\nimport Citizens from \"../../assets/citizens.svg\";\nimport CitizensBuilding from \"../../assets/citizens-building.svg\";\nimport VoteByMail from \"../../assets/vote-by-mail.svg\";\nimport NullTimes from \"../../assets/null-times.svg\";\n\ntype Props = {\n  results: ElectionResults;\n};\n\nconst ShowcaseItem: React.FC<PropsWithChildren<{ classes: ClassNames; icon: ReactNode; value: number }>> = ({\n  classes,\n  icon,\n  value,\n  children,\n}) => (\n  <div className={classes.showcaseItem}>\n    <div className={classes.showcaseIcon}>{icon}</div>\n    <div className={classes.showcaseContainer}>\n      <Heading2 className={classes.showcaseValue}>{formatGroupedNumber(value)}</Heading2>\n      <DivBodyHuge className={classes.showcaseText}>{children}</DivBodyHuge>\n    </div>\n  </div>\n);\n\nexport const ElectionResultsProcess = themable<Props>(\n  \"ElectionResultsProcess\",\n  cssClasses,\n)(({ results, classes }) => {\n  return (\n    <div className={classes.root}>\n      {results.eligibleVoters != null && (\n        <ShowcaseItem classes={classes} icon={<Citizens />} value={results.eligibleVoters}>\n          Total alegători înscriși în liste\n        </ShowcaseItem>\n      )}\n      {results.votesByMail != null && (\n        <ShowcaseItem classes={classes} icon={<VoteByMail />} value={results.votesByMail}>\n          Total voturi prin corespondență\n        </ShowcaseItem>\n      )}\n      <ShowcaseItem classes={classes} icon={<CitizensBuilding />} value={results.totalVotes}>\n        Total alegători prezenți la urne\n      </ShowcaseItem>\n      <ShowcaseItem classes={classes} icon={<BallotFillIn />} value={results.validVotes}>\n        Total voturi valabil exprimate\n      </ShowcaseItem>\n      <ShowcaseItem classes={classes} icon={<NullTimes />} value={results.nullVotes}>\n        Total voturi nule\n      </ShowcaseItem>\n    </div>\n  );\n});\n","import { parseISO } from \"date-fns\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { ElectionBallotMeta } from \"../../types/Election\";\nimport { mergeClasses, themable } from \"../../util/theme\";\nimport cssClasses from \"./ElectionTimeline.module.scss\";\n\ntype Props = {\n  items: ElectionBallotMeta[];\n  selectedBallotId?: number | null;\n  onSelectBallot?: (meta: ElectionBallotMeta) => unknown;\n};\n\nconst dateComparator = (a: ElectionBallotMeta, b: ElectionBallotMeta): number => {\n  return parseISO(b.date).getTime() - parseISO(a.date).getTime();\n};\n\ntype TimelineElection = {\n  electionId: number;\n  title: string;\n  live: boolean;\n  ballots: ElectionBallotMeta[];\n};\ntype TimelineYear = { year: number; elections: TimelineElection[] };\n\nexport const ElectionTimeline = themable<Props>(\n  \"ElectionTimeline\",\n  cssClasses,\n)(({ classes, items, selectedBallotId, onSelectBallot }) => {\n  const years = useMemo(() => {\n    const sortedItems = [...items];\n    sortedItems.sort(dateComparator);\n\n    const yearsArray: TimelineYear[] = [];\n    let lastYear: number;\n    let electionsById: Map<number, TimelineElection>;\n\n    sortedItems.forEach((meta: ElectionBallotMeta) => {\n      const metaYear = parseISO(meta.date).getFullYear();\n      if (metaYear !== lastYear) {\n        lastYear = metaYear;\n        electionsById = new Map();\n        yearsArray.push({ year: metaYear, elections: [] });\n      }\n      const currentYear = yearsArray[yearsArray.length - 1];\n\n      const { electionId } = meta;\n      let election = electionsById.get(electionId);\n      if (!election) {\n        election = { electionId, title: meta.title, live: !!meta.live, ballots: [] };\n        currentYear.elections.push(election);\n        electionsById.set(electionId, election);\n      }\n\n      election.ballots.push(meta);\n    });\n\n    return yearsArray;\n  }, [items]);\n\n  const [selectedElectionId, selectedYear] = useMemo(() => {\n    if (selectedBallotId == null) return [null, null];\n    const meta = items.find((m) => m.ballotId === selectedBallotId);\n    if (!meta) return [null, null];\n    return [meta.electionId, parseISO(meta.date).getFullYear()];\n  }, [items, selectedBallotId]);\n\n  const [expandedElections, setExpandedElections] = useState<Set<number>>(() => new Set());\n  useEffect(() => {\n    setExpandedElections((set) => {\n      if (selectedElectionId == null || set.has(selectedElectionId)) return set;\n      const newSet = new Set(set);\n      newSet.add(selectedElectionId);\n      return newSet;\n    });\n  }, [selectedElectionId]);\n\n  const onElectionClick = (election: TimelineElection) => () => {\n    if (election.ballots.length === 1) {\n      if (onSelectBallot) {\n        onSelectBallot(election.ballots[0]);\n      }\n      return;\n    }\n\n    const { electionId } = election;\n    setExpandedElections((set) => {\n      const newSet = new Set(set);\n      if (set.has(electionId)) {\n        newSet.delete(electionId);\n      } else {\n        newSet.add(electionId);\n      }\n      return newSet;\n    });\n  };\n\n  const onBallotClick = (meta: ElectionBallotMeta) => () => {\n    if (onSelectBallot) {\n      onSelectBallot(meta);\n    }\n  };\n\n  return (\n    <div className={classes.root}>\n      {years.map((year) => (\n        <div key={year.year} className={classes.year}>\n          <div className={mergeClasses(classes.yearRow, selectedYear === year.year && classes.selectedYear)}>\n            {year.year}\n          </div>\n          {year.elections.map((election) => (\n            <div key={election.electionId} className={classes.election}>\n              <div className={classes.electionRow} onClick={onElectionClick(election)}>\n                <div className={classes.collapseWidget}>\n                  {election.ballots.length > 1 && (\n                    <svg\n                      className={mergeClasses(\n                        classes.collapseCaret,\n                        expandedElections.has(election.electionId) && classes.collapseCaretExpanded,\n                      )}\n                      viewBox=\"0 0 7 10\"\n                    >\n                      <path d=\"M 0 0 L 0 10 L 7 5 L 0 0\" fill=\"currentColor\" />\n                    </svg>\n                  )}\n                </div>\n                <div\n                  className={mergeClasses(\n                    classes.electionTitle,\n                    selectedElectionId === election.electionId && classes.selectedElection,\n                  )}\n                >\n                  {election.title}\n                </div>\n                {election.live && <div className={classes.live}>LIVE</div>}\n              </div>\n              {expandedElections.has(election.electionId) &&\n                election.ballots.length >= 2 &&\n                election.ballots.map((meta, index) => (\n                  <div key={meta.ballotId} className={classes.ballotRow} onClick={onBallotClick(meta)}>\n                    <div\n                      className={mergeClasses(\n                        classes.ballotTitle,\n                        selectedBallotId === meta.ballotId && classes.selectedBallot,\n                      )}\n                    >\n                      {meta.ballot || `${meta.title} ${index + 1}`}\n                    </div>\n                  </div>\n                ))}\n            </div>\n          ))}\n          <div className={classes.yearLine} />\n          <div className={mergeClasses(classes.yearDot, selectedYear === year.year && classes.selectedYearDot)} />\n        </div>\n      ))}\n    </div>\n  );\n});\n","import React, { useCallback, useMemo } from \"react\";\nimport Select from \"react-select\";\nimport { ElectionScope, ElectionScopeIncomplete } from \"../../types/Election\";\nimport { APIRequestState, useApiResponse } from \"../../util/api\";\nimport { ElectionScopeAPI, OptionWithID } from \"../../util/electionApi\";\nimport { themable, useTheme } from \"../../util/theme\";\nimport { Label } from \"../Typography/Typography\";\nimport cssClasses from \"./ElectionScopePicker.module.scss\";\n\ntype Props = {\n  apiData: ElectionScopePickerAPIData;\n  value: ElectionScopeIncomplete;\n  onChange: (scope: ElectionScopeIncomplete) => unknown;\n};\n\nexport const electionScopePickerUpdateType = (\n  scope: ElectionScopeIncomplete,\n  type: ElectionScope[\"type\"],\n): ElectionScopeIncomplete => {\n  if (scope.type === type || (type === \"diaspora\" && scope.type === \"diaspora_country\" && scope.countryId != null)) {\n    return scope;\n  }\n\n  switch (type) {\n    case \"national\":\n      return { type: \"national\" };\n    case \"diaspora\":\n      return { type: \"diaspora\" };\n    case \"diaspora_country\":\n      return {\n        type: \"diaspora_country\",\n        countryId: (scope as any)?.countryId ?? null, // eslint-disable-line @typescript-eslint/no-explicit-any\n      };\n    case \"county\":\n      return {\n        type: \"county\",\n        countyId: (scope as any)?.countyId ?? null, // eslint-disable-line @typescript-eslint/no-explicit-any\n      };\n    case \"locality\":\n      return {\n        type: \"locality\",\n        countyId: (scope as any)?.countyId ?? null, // eslint-disable-line @typescript-eslint/no-explicit-any\n        localityId: (scope as any)?.localityId ?? null, // eslint-disable-line @typescript-eslint/no-explicit-any\n      };\n  }\n};\n\nexport type ElectionScopePickerAPIData = {\n  countyData: APIRequestState<OptionWithID[]>;\n  localityData: APIRequestState<OptionWithID[]>;\n  countryData: APIRequestState<OptionWithID[]>;\n};\n\nexport const useElectionScopePickerApi = (\n  api: ElectionScopeAPI,\n  scope: ElectionScopeIncomplete,\n): ElectionScopePickerAPIData => {\n  const shouldQueryCounty = scope.type === \"county\" || scope.type === \"locality\";\n  const countyData = useApiResponse(() => (shouldQueryCounty ? api.getCounties() : null), [api, shouldQueryCounty]);\n\n  const queryCountyId: number | null = (scope.type === \"locality\" ? scope.countyId : null) ?? null;\n  const localityData = useApiResponse(\n    () =>\n      queryCountyId != null\n        ? {\n            invocation: api.getLocalities(queryCountyId),\n            discardPreviousData: true,\n          }\n        : null,\n    [api, queryCountyId],\n  );\n\n  const shouldQueryCountry = scope.type === \"diaspora\" || scope.type === \"diaspora_country\";\n  const countryData = useApiResponse(() => (shouldQueryCountry ? api.getCountries() : null), [api, shouldQueryCountry]);\n\n  return { countyData, localityData, countryData };\n};\n\nexport type ElectionScopePickerSelectOnChange<K = number> = (\n  value: OptionWithID<K> | ReadonlyArray<OptionWithID<K>> | null | undefined,\n) => void;\n\nexport type ElectionScopePickerSelectProps<K = number> = {\n  label: string;\n  selectProps: {\n    value: OptionWithID<K> | null;\n    onChange: ElectionScopePickerSelectOnChange<K>;\n    options: OptionWithID<K>[];\n    isLoading: boolean;\n    isDisabled: boolean;\n    placeholder?: string;\n  };\n};\n\nfunction resolveValue<K extends string | number>(\n  x: K | OptionWithID<K> | ReadonlyArray<OptionWithID<K>> | null | undefined,\n): K | null {\n  if (Array.isArray(x)) return x[0]?.id;\n  return (typeof x === \"object\" ? ((x as unknown) as OptionWithID<K> | null)?.id : x) ?? null;\n}\n\nconst resolveInMap = <K,>(id: K | null | undefined, map: Map<K, OptionWithID<K>>): OptionWithID<K> | null =>\n  id == null ? null : { id, name: map.get(id)?.name || \"\" };\n\nconst buildMap = <K,>(list: OptionWithID<K>[] | null | undefined): Map<K, OptionWithID<K>> => {\n  const map = new Map();\n  if (list) {\n    list.forEach((item) => {\n      map.set(item.id, item);\n    });\n  }\n  return map;\n};\n\nexport const useElectionScopePickerGetSelectProps = (\n  apiData: ElectionScopePickerAPIData,\n  scope: ElectionScopeIncomplete,\n  onChangeScope: (newScope: ElectionScopeIncomplete) => unknown,\n): ElectionScopePickerSelectProps[] => {\n  const countyMap = useMemo(() => buildMap(apiData.countyData.data), [apiData.countyData.data]);\n  const localityMap = useMemo(() => buildMap(apiData.localityData.data), [apiData.localityData.data]);\n  const countryMap = useMemo(() => buildMap(apiData.countyData.data), [apiData.countryData.data]);\n\n  const onCountyChange = useCallback<ElectionScopePickerSelectOnChange>(\n    (value) => {\n      const countyId = resolveValue(value);\n      if (scope.type === \"county\" && countyId !== (scope.countyId ?? null)) {\n        onChangeScope({ type: \"county\", countyId });\n      } else if (scope.type === \"locality\" && countyId !== (scope.countyId ?? null)) {\n        onChangeScope({ type: \"locality\", countyId, localityId: null });\n      }\n    },\n    [scope, onChangeScope],\n  );\n\n  const onLocalityChange = useCallback<ElectionScopePickerSelectOnChange>(\n    (value) => {\n      const localityId = resolveValue(value);\n      if (scope.type === \"locality\" && localityId !== (scope.localityId ?? null)) {\n        onChangeScope({ type: \"locality\", countyId: scope.countyId, localityId });\n      }\n    },\n    [scope, onChangeScope],\n  );\n\n  const onCountryChange = useCallback<ElectionScopePickerSelectOnChange>(\n    (value) => {\n      const countryId = resolveValue(value);\n      if (countryId == null) {\n        if (scope.type === \"diaspora_country\") {\n          onChangeScope({ type: \"diaspora\" });\n        }\n      } else {\n        if (\n          scope.type === \"diaspora\" ||\n          (scope.type === \"diaspora_country\" && countryId !== (scope.countryId ?? null))\n        ) {\n          onChangeScope({ type: \"diaspora_country\", countryId });\n        }\n      }\n    },\n    [scope, onChangeScope],\n  );\n\n  const selects: ElectionScopePickerSelectProps[] = [];\n\n  if (scope.type === \"county\" || scope.type === \"locality\") {\n    selects.push({\n      label: \"Județ\",\n      selectProps: {\n        value: resolveInMap(scope.countyId, countyMap),\n        onChange: onCountyChange,\n        options: apiData.countyData.data ?? [],\n        isLoading: apiData.countyData.loading,\n        isDisabled: false,\n        placeholder: \"Selectează un județ\",\n      },\n    });\n  }\n\n  if (scope.type === \"locality\") {\n    selects.push({\n      label: \"Localitate\",\n      selectProps: {\n        value: resolveInMap(scope.localityId, localityMap),\n        onChange: onLocalityChange,\n        options: apiData.localityData.data ?? [],\n        isLoading: apiData.localityData.loading,\n        isDisabled: scope.countyId == null,\n        placeholder: \"Selectează o localitate\",\n      },\n    });\n  }\n\n  if (scope.type === \"diaspora\" || scope.type === \"diaspora_country\") {\n    selects.push({\n      label: \"Țară\",\n      selectProps: {\n        value: resolveInMap(scope.type === \"diaspora_country\" ? scope.countryId : null, countryMap),\n        onChange: onCountryChange,\n        options: apiData.countryData.data ?? [],\n        isLoading: apiData.countryData.loading,\n        isDisabled: false,\n        placeholder: \"Selectează o țară\",\n      },\n    });\n  }\n\n  return selects;\n};\n\nfunction getOptionLabel<K>({ name }: OptionWithID<K, string>): string {\n  return name;\n}\nfunction getOptionValue<K extends string | number>({ id }: OptionWithID<K>): string {\n  return id.toString();\n}\n\nconst typeNames = {\n  national: \"Național\",\n  county: \"Județ\",\n  locality: \"Localitate\",\n  diaspora: \"Diaspora\",\n};\n\nconst typeOptions: OptionWithID<ElectionScope[\"type\"]>[] = [\n  { id: \"national\", name: typeNames.national },\n  { id: \"county\", name: typeNames.county },\n  { id: \"locality\", name: typeNames.locality },\n  { id: \"diaspora\", name: typeNames.diaspora },\n];\n\nexport const useElectionScopePickerGetTypeSelectProps = (\n  scope: ElectionScopeIncomplete,\n  onChangeScope: (newScope: ElectionScopeIncomplete) => unknown,\n): ElectionScopePickerSelectProps<ElectionScope[\"type\"]> => {\n  const onTypeChange = useCallback<ElectionScopePickerSelectOnChange<ElectionScope[\"type\"]>>(\n    (value) => {\n      const type = resolveValue(value);\n      if (type === null) return;\n      const newScope = electionScopePickerUpdateType(scope, type);\n      if (newScope !== scope) {\n        onChangeScope(newScope);\n      }\n    },\n    [scope, onChangeScope],\n  );\n\n  const value = scope.type === \"diaspora_country\" ? \"diaspora\" : scope.type;\n  return {\n    label: \"Diviziune\",\n    selectProps: {\n      value: { id: value, name: typeNames[value] },\n      onChange: onTypeChange,\n      options: typeOptions,\n      isLoading: false,\n      isDisabled: false,\n    },\n  };\n};\n\nconst loadingMessage = () => \"Se încarcă...\";\n\nconst typeSelectStyles = {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  control: (provided: any) => ({\n    ...provided,\n    borderColor: \"transparent\",\n    borderWidth: 0,\n    cursor: \"pointer\",\n  }),\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  valueContainer: (provided: any) => ({\n    ...provided,\n    fontWeight: 600,\n    fontSize: `${30 / 16}rem`,\n    paddingLeft: 0,\n  }),\n  indicatorSeparator: () => ({\n    display: \"none\",\n  }),\n};\n\nexport const ElectionScopePicker = themable<Props>(\n  \"ElectionScopePicker\",\n  cssClasses,\n)(({ classes, apiData, value, onChange }) => {\n  const typeSelect = useElectionScopePickerGetTypeSelectProps(value, onChange);\n  const selects = useElectionScopePickerGetSelectProps(apiData, value, onChange);\n  const theme = useTheme();\n\n  const selectTheme = useMemo(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    () => (t: any) => ({\n      ...t,\n      colors: {\n        ...t.colors,\n        primary: theme.colors.primary,\n        primary75: theme.colors.primary75,\n        primary50: theme.colors.primary50,\n        primary25: theme.colors.primary25,\n      },\n    }),\n    [theme],\n  );\n\n  return (\n    <div className={classes.root}>\n      <Select\n        {...typeSelect.selectProps}\n        isSearchable={false}\n        getOptionLabel={getOptionLabel}\n        getOptionValue={getOptionValue}\n        theme={selectTheme}\n        className={classes.typeSelect}\n        styles={typeSelectStyles}\n      />\n      <div className={classes.selects}>\n        {selects.map(({ label, selectProps }, index) => (\n          <div key={index} className={classes.selectContainer}>\n            <Label className={classes.selectLabel}>{label}</Label>\n            <Select\n              {...selectProps}\n              isClearable\n              getOptionLabel={getOptionLabel}\n              getOptionValue={getOptionValue}\n              theme={selectTheme}\n              className={classes.select}\n              loadingMessage={loadingMessage}\n            />\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n});\n"],"names":["objectWithoutPropertiesLoose","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","cssClasses","getDimensionObject","node","rect","getBoundingClientRect","width","height","top","x","left","y","right","bottom","useDimensions","_ref","arguments","length","undefined","_ref$liveMeasure","liveMeasure","_useState","useState","dimensions","setDimensions","_useState2","setNode","useCallback","useLayoutEffect","measure","window","requestAnimationFrame","addEventListener","removeEventListener","WorldMap","RomaniaMap","defaultConstants","ShowcaseItem"],"mappings":"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"}